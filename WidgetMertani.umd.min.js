(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["WidgetMertani"]=e(require("vue")):t["WidgetMertani"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(){"use strict";var e={7559:function(t,e){e.A=(t,e)=>{const i=t.__vccOpts||t;for(const[s,r]of e)i[s]=r;return i}},9274:function(e){e.exports=t},9306:function(t,e,i){var s=i(4901),r=i(6823),n=TypeError;t.exports=function(t){if(s(t))return t;throw new n(r(t)+" is not a function")}},3506:function(t,e,i){var s=i(3925),r=String,n=TypeError;t.exports=function(t){if(s(t))return t;throw new n("Can't set "+r(t)+" as a prototype")}},8551:function(t,e,i){var s=i(34),r=String,n=TypeError;t.exports=function(t){if(s(t))return t;throw new n(r(t)+" is not an object")}},7811:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:function(t,e,i){var s=i(6706),r=i(4576),n=TypeError;t.exports=s(ArrayBuffer.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==r(t))throw new n("ArrayBuffer expected");return t.byteLength}},3238:function(t,e,i){var s=i(9504),r=i(7394),n=s(ArrayBuffer.prototype.slice);t.exports=function(t){if(0!==r(t))return!1;try{return n(t,0,0),!1}catch(e){return!0}}},5636:function(t,e,i){var s=i(4475),r=i(9504),n=i(6706),o=i(7696),a=i(3238),l=i(7394),h=i(4483),c=i(1548),d=s.structuredClone,p=s.ArrayBuffer,u=s.DataView,m=s.TypeError,g=Math.min,f=p.prototype,v=u.prototype,y=r(f.slice),w=n(f,"resizable","get"),b=n(f,"maxByteLength","get"),x=r(v.getInt8),C=r(v.setInt8);t.exports=(c||h)&&function(t,e,i){var s,r=l(t),n=void 0===e?r:o(e),f=!w||!w(t);if(a(t))throw new m("ArrayBuffer is detached");if(c&&(t=d(t,{transfer:[t]}),r===n&&(i||f)))return t;if(r>=n&&(!i||f))s=y(t,0,n);else{var v=i&&!f&&b?{maxByteLength:b(t)}:void 0;s=new p(n,v);for(var I=new u(t),E=new u(s),$=g(n,r),k=0;k<$;k++)C(E,k,x(I,k))}return c||h(t),s}},4644:function(t,e,i){var s,r,n,o=i(7811),a=i(3724),l=i(4475),h=i(4901),c=i(34),d=i(9297),p=i(6955),u=i(6823),m=i(6699),g=i(6840),f=i(2106),v=i(1625),y=i(2787),w=i(2967),b=i(8227),x=i(3392),C=i(1181),I=C.enforce,E=C.get,$=l.Int8Array,k=$&&$.prototype,S=l.Uint8ClampedArray,T=S&&S.prototype,M=$&&y($),P=k&&y(k),z=Object.prototype,L=l.TypeError,B=b("toStringTag"),R=x("TYPED_ARRAY_TAG"),V="TypedArrayConstructor",N=o&&!!w&&"Opera"!==p(l.opera),A=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},O=function(t){if(!c(t))return!1;var e=p(t);return"DataView"===e||d(D,e)||d(F,e)},H=function(t){var e=y(t);if(c(e)){var i=E(e);return i&&d(i,V)?i[V]:H(e)}},W=function(t){if(!c(t))return!1;var e=p(t);return d(D,e)||d(F,e)},_=function(t){if(W(t))return t;throw new L("Target is not a typed array")},Y=function(t){if(h(t)&&(!w||v(M,t)))return t;throw new L(u(t)+" is not a typed array constructor")},X=function(t,e,i,s){if(a){if(i)for(var r in D){var n=l[r];if(n&&d(n.prototype,t))try{delete n.prototype[t]}catch(o){try{n.prototype[t]=e}catch(h){}}}P[t]&&!i||g(P,t,i?e:N&&k[t]||e,s)}},j=function(t,e,i){var s,r;if(a){if(w){if(i)for(s in D)if(r=l[s],r&&d(r,t))try{delete r[t]}catch(n){}if(M[t]&&!i)return;try{return g(M,t,i?e:N&&M[t]||e)}catch(n){}}for(s in D)r=l[s],!r||r[t]&&!i||g(r,t,e)}};for(s in D)r=l[s],n=r&&r.prototype,n?I(n)[V]=r:N=!1;for(s in F)r=l[s],n=r&&r.prototype,n&&(I(n)[V]=r);if((!N||!h(M)||M===Function.prototype)&&(M=function(){throw new L("Incorrect invocation")},N))for(s in D)l[s]&&w(l[s],M);if((!N||!P||P===z)&&(P=M.prototype,N))for(s in D)l[s]&&w(l[s].prototype,P);if(N&&y(T)!==P&&w(T,P),a&&!d(P,B))for(s in A=!0,f(P,B,{configurable:!0,get:function(){return c(this)?this[R]:void 0}}),D)l[s]&&m(l[s],R,s);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:A&&R,aTypedArray:_,aTypedArrayConstructor:Y,exportTypedArrayMethod:X,exportTypedArrayStaticMethod:j,getTypedArrayConstructor:H,isView:O,isTypedArray:W,TypedArray:M,TypedArrayPrototype:P}},5370:function(t,e,i){var s=i(6198);t.exports=function(t,e,i){var r=0,n=arguments.length>2?i:s(e),o=new t(n);while(n>r)o[r]=e[r++];return o}},9617:function(t,e,i){var s=i(5397),r=i(5610),n=i(6198),o=function(t){return function(e,i,o){var a=s(e),l=n(a);if(0===l)return!t&&-1;var h,c=r(o,l);if(t&&i!==i){while(l>c)if(h=a[c++],h!==h)return!0}else for(;l>c;c++)if((t||c in a)&&a[c]===i)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},4527:function(t,e,i){var s=i(3724),r=i(4376),n=TypeError,o=Object.getOwnPropertyDescriptor,a=s&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!o(t,"length").writable)throw new n("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7628:function(t,e,i){var s=i(6198);t.exports=function(t,e){for(var i=s(t),r=new e(i),n=0;n<i;n++)r[n]=t[i-n-1];return r}},9928:function(t,e,i){var s=i(6198),r=i(1291),n=RangeError;t.exports=function(t,e,i,o){var a=s(t),l=r(i),h=l<0?a+l:l;if(h>=a||h<0)throw new n("Incorrect index");for(var c=new e(a),d=0;d<a;d++)c[d]=d===h?o:t[d];return c}},4576:function(t,e,i){var s=i(9504),r=s({}.toString),n=s("".slice);t.exports=function(t){return n(r(t),8,-1)}},6955:function(t,e,i){var s=i(2140),r=i(4901),n=i(4576),o=i(8227),a=o("toStringTag"),l=Object,h="Arguments"===n(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(i){}};t.exports=s?n:function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=c(e=l(t),a))?i:h?n(e):"Object"===(s=n(e))&&r(e.callee)?"Arguments":s}},7740:function(t,e,i){var s=i(9297),r=i(5031),n=i(7347),o=i(4913);t.exports=function(t,e,i){for(var a=r(e),l=o.f,h=n.f,c=0;c<a.length;c++){var d=a[c];s(t,d)||i&&s(i,d)||l(t,d,h(e,d))}}},2211:function(t,e,i){var s=i(9039);t.exports=!s((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6699:function(t,e,i){var s=i(3724),r=i(4913),n=i(6980);t.exports=s?function(t,e,i){return r.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},6980:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:function(t,e,i){var s=i(283),r=i(4913);t.exports=function(t,e,i){return i.get&&s(i.get,e,{getter:!0}),i.set&&s(i.set,e,{setter:!0}),r.f(t,e,i)}},6840:function(t,e,i){var s=i(4901),r=i(4913),n=i(283),o=i(9433);t.exports=function(t,e,i,a){a||(a={});var l=a.enumerable,h=void 0!==a.name?a.name:e;if(s(i)&&n(i,h,a),a.global)l?t[e]=i:o(e,i);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(c){}l?t[e]=i:r.f(t,e,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9433:function(t,e,i){var s=i(4475),r=Object.defineProperty;t.exports=function(t,e){try{r(s,t,{value:e,configurable:!0,writable:!0})}catch(i){s[t]=e}return e}},3724:function(t,e,i){var s=i(9039);t.exports=!s((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4483:function(t,e,i){var s,r,n,o,a=i(4475),l=i(9714),h=i(1548),c=a.structuredClone,d=a.ArrayBuffer,p=a.MessageChannel,u=!1;if(h)u=function(t){c(t,{transfer:[t]})};else if(d)try{p||(s=l("worker_threads"),s&&(p=s.MessageChannel)),p&&(r=new p,n=new d(2),o=function(t){r.port1.postMessage(null,[t])},2===n.byteLength&&(o(n),0===n.byteLength&&(u=o)))}catch(m){}t.exports=u},4055:function(t,e,i){var s=i(4475),r=i(34),n=s.document,o=r(n)&&r(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},6837:function(t){var e=TypeError,i=9007199254740991;t.exports=function(t){if(t>i)throw e("Maximum allowed index exceeded");return t}},7290:function(t,e,i){var s=i(516),r=i(9088);t.exports=!s&&!r&&"object"==typeof window&&"object"==typeof document},516:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},9088:function(t,e,i){var s=i(4475),r=i(4576);t.exports="process"===r(s.process)},9392:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7388:function(t,e,i){var s,r,n=i(4475),o=i(9392),a=n.process,l=n.Deno,h=a&&a.versions||l&&l.version,c=h&&h.v8;c&&(s=c.split("."),r=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!r&&o&&(s=o.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=o.match(/Chrome\/(\d+)/),s&&(r=+s[1]))),t.exports=r},8727:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6518:function(t,e,i){var s=i(4475),r=i(7347).f,n=i(6699),o=i(6840),a=i(9433),l=i(7740),h=i(2796);t.exports=function(t,e){var i,c,d,p,u,m,g=t.target,f=t.global,v=t.stat;if(c=f?s:v?s[g]||a(g,{}):s[g]&&s[g].prototype,c)for(d in e){if(u=e[d],t.dontCallGetSet?(m=r(c,d),p=m&&m.value):p=c[d],i=h(f?d:g+(v?".":"#")+d,t.forced),!i&&void 0!==p){if(typeof u==typeof p)continue;l(u,p)}(t.sham||p&&p.sham)&&n(u,"sham",!0),o(c,d,u,t)}}},9039:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},616:function(t,e,i){var s=i(9039);t.exports=!s((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:function(t,e,i){var s=i(616),r=Function.prototype.call;t.exports=s?r.bind(r):function(){return r.apply(r,arguments)}},350:function(t,e,i){var s=i(3724),r=i(9297),n=Function.prototype,o=s&&Object.getOwnPropertyDescriptor,a=r(n,"name"),l=a&&"something"===function(){}.name,h=a&&(!s||s&&o(n,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:h}},6706:function(t,e,i){var s=i(9504),r=i(9306);t.exports=function(t,e,i){try{return s(r(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(n){}}},9504:function(t,e,i){var s=i(616),r=Function.prototype,n=r.call,o=s&&r.bind.bind(n,n);t.exports=s?o:function(t){return function(){return n.apply(t,arguments)}}},7751:function(t,e,i){var s=i(4475),r=i(4901),n=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?n(s[t]):s[t]&&s[t][e]}},5966:function(t,e,i){var s=i(9306),r=i(4117);t.exports=function(t,e){var i=t[e];return r(i)?void 0:s(i)}},4475:function(t,e,i){var s=function(t){return t&&t.Math===Math&&t};t.exports=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof i.g&&i.g)||s("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(t,e,i){var s=i(9504),r=i(8981),n=s({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return n(r(t),e)}},421:function(t){t.exports={}},5917:function(t,e,i){var s=i(3724),r=i(9039),n=i(4055);t.exports=!s&&!r((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},7055:function(t,e,i){var s=i(9504),r=i(9039),n=i(4576),o=Object,a=s("".split);t.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?a(t,""):o(t)}:o},3706:function(t,e,i){var s=i(9504),r=i(4901),n=i(7629),o=s(Function.toString);r(n.inspectSource)||(n.inspectSource=function(t){return o(t)}),t.exports=n.inspectSource},1181:function(t,e,i){var s,r,n,o=i(8622),a=i(4475),l=i(34),h=i(6699),c=i(9297),d=i(7629),p=i(6119),u=i(421),m="Object already initialized",g=a.TypeError,f=a.WeakMap,v=function(t){return n(t)?r(t):s(t,{})},y=function(t){return function(e){var i;if(!l(e)||(i=r(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return i}};if(o||d.state){var w=d.state||(d.state=new f);w.get=w.get,w.has=w.has,w.set=w.set,s=function(t,e){if(w.has(t))throw new g(m);return e.facade=t,w.set(t,e),e},r=function(t){return w.get(t)||{}},n=function(t){return w.has(t)}}else{var b=p("state");u[b]=!0,s=function(t,e){if(c(t,b))throw new g(m);return e.facade=t,h(t,b,e),e},r=function(t){return c(t,b)?t[b]:{}},n=function(t){return c(t,b)}}t.exports={set:s,get:r,has:n,enforce:v,getterFor:y}},4376:function(t,e,i){var s=i(4576);t.exports=Array.isArray||function(t){return"Array"===s(t)}},1108:function(t,e,i){var s=i(6955);t.exports=function(t){var e=s(t);return"BigInt64Array"===e||"BigUint64Array"===e}},4901:function(t){var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:function(t,e,i){var s=i(9039),r=i(4901),n=/#|\.prototype\./,o=function(t,e){var i=l[a(t)];return i===c||i!==h&&(r(e)?s(e):!!e)},a=o.normalize=function(t){return String(t).replace(n,".").toLowerCase()},l=o.data={},h=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},4117:function(t){t.exports=function(t){return null===t||void 0===t}},34:function(t,e,i){var s=i(4901);t.exports=function(t){return"object"==typeof t?null!==t:s(t)}},3925:function(t,e,i){var s=i(34);t.exports=function(t){return s(t)||null===t}},6395:function(t){t.exports=!1},757:function(t,e,i){var s=i(7751),r=i(4901),n=i(1625),o=i(7040),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=s("Symbol");return r(e)&&n(e.prototype,a(t))}},6198:function(t,e,i){var s=i(8014);t.exports=function(t){return s(t.length)}},283:function(t,e,i){var s=i(9504),r=i(9039),n=i(4901),o=i(9297),a=i(3724),l=i(350).CONFIGURABLE,h=i(3706),c=i(1181),d=c.enforce,p=c.get,u=String,m=Object.defineProperty,g=s("".slice),f=s("".replace),v=s([].join),y=a&&!r((function(){return 8!==m((function(){}),"length",{value:8}).length})),w=String(String).split("String"),b=t.exports=function(t,e,i){"Symbol("===g(u(e),0,7)&&(e="["+f(u(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!o(t,"name")||l&&t.name!==e)&&(a?m(t,"name",{value:e,configurable:!0}):t.name=e),y&&i&&o(i,"arity")&&t.length!==i.arity&&m(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?a&&m(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var s=d(t);return o(s,"source")||(s.source=v(w,"string"==typeof e?e:"")),t};Function.prototype.toString=b((function(){return n(this)&&p(this).source||h(this)}),"toString")},741:function(t){var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var s=+t;return(s>0?i:e)(s)}},4913:function(t,e,i){var s=i(3724),r=i(5917),n=i(8686),o=i(8551),a=i(6969),l=TypeError,h=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",u="writable";e.f=s?n?function(t,e,i){if(o(t),e=a(e),o(i),"function"===typeof t&&"prototype"===e&&"value"in i&&u in i&&!i[u]){var s=c(t,e);s&&s[u]&&(t[e]=i.value,i={configurable:p in i?i[p]:s[p],enumerable:d in i?i[d]:s[d],writable:!1})}return h(t,e,i)}:h:function(t,e,i){if(o(t),e=a(e),o(i),r)try{return h(t,e,i)}catch(s){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},7347:function(t,e,i){var s=i(3724),r=i(9565),n=i(8773),o=i(6980),a=i(5397),l=i(6969),h=i(9297),c=i(5917),d=Object.getOwnPropertyDescriptor;e.f=s?d:function(t,e){if(t=a(t),e=l(e),c)try{return d(t,e)}catch(i){}if(h(t,e))return o(!r(n.f,t,e),t[e])}},8480:function(t,e,i){var s=i(1828),r=i(8727),n=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,n)}},3717:function(t,e){e.f=Object.getOwnPropertySymbols},2787:function(t,e,i){var s=i(9297),r=i(4901),n=i(8981),o=i(6119),a=i(2211),l=o("IE_PROTO"),h=Object,c=h.prototype;t.exports=a?h.getPrototypeOf:function(t){var e=n(t);if(s(e,l))return e[l];var i=e.constructor;return r(i)&&e instanceof i?i.prototype:e instanceof h?c:null}},1625:function(t,e,i){var s=i(9504);t.exports=s({}.isPrototypeOf)},1828:function(t,e,i){var s=i(9504),r=i(9297),n=i(5397),o=i(9617).indexOf,a=i(421),l=s([].push);t.exports=function(t,e){var i,s=n(t),h=0,c=[];for(i in s)!r(a,i)&&r(s,i)&&l(c,i);while(e.length>h)r(s,i=e[h++])&&(~o(c,i)||l(c,i));return c}},8773:function(t,e){var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,r=s&&!i.call({1:2},1);e.f=r?function(t){var e=s(this,t);return!!e&&e.enumerable}:i},2967:function(t,e,i){var s=i(6706),r=i(34),n=i(7750),o=i(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{t=s(Object.prototype,"__proto__","set"),t(i,[]),e=i instanceof Array}catch(a){}return function(i,s){return n(i),o(s),r(i)?(e?t(i,s):i.__proto__=s,i):i}}():void 0)},4270:function(t,e,i){var s=i(9565),r=i(4901),n=i(34),o=TypeError;t.exports=function(t,e){var i,a;if("string"===e&&r(i=t.toString)&&!n(a=s(i,t)))return a;if(r(i=t.valueOf)&&!n(a=s(i,t)))return a;if("string"!==e&&r(i=t.toString)&&!n(a=s(i,t)))return a;throw new o("Can't convert object to primitive value")}},5031:function(t,e,i){var s=i(7751),r=i(9504),n=i(8480),o=i(3717),a=i(8551),l=r([].concat);t.exports=s("Reflect","ownKeys")||function(t){var e=n.f(a(t)),i=o.f;return i?l(e,i(t)):e}},7750:function(t,e,i){var s=i(4117),r=TypeError;t.exports=function(t){if(s(t))throw new r("Can't call method on "+t);return t}},6119:function(t,e,i){var s=i(5745),r=i(3392),n=s("keys");t.exports=function(t){return n[t]||(n[t]=r(t))}},7629:function(t,e,i){var s=i(6395),r=i(4475),n=i(9433),o="__core-js_shared__",a=t.exports=r[o]||n(o,{});(a.versions||(a.versions=[])).push({version:"3.36.1",mode:s?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.1/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(t,e,i){var s=i(7629);t.exports=function(t,e){return s[t]||(s[t]=e||{})}},1548:function(t,e,i){var s=i(4475),r=i(9039),n=i(7388),o=i(7290),a=i(516),l=i(9088),h=s.structuredClone;t.exports=!!h&&!r((function(){if(a&&n>92||l&&n>94||o&&n>97)return!1;var t=new ArrayBuffer(8),e=h(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},4495:function(t,e,i){var s=i(7388),r=i(9039),n=i(4475),o=n.String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&s&&s<41}))},5610:function(t,e,i){var s=i(1291),r=Math.max,n=Math.min;t.exports=function(t,e){var i=s(t);return i<0?r(i+e,0):n(i,e)}},5854:function(t,e,i){var s=i(2777),r=TypeError;t.exports=function(t){var e=s(t,"number");if("number"==typeof e)throw new r("Can't convert number to bigint");return BigInt(e)}},7696:function(t,e,i){var s=i(1291),r=i(8014),n=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=s(t),i=r(e);if(e!==i)throw new n("Wrong length or index");return i}},5397:function(t,e,i){var s=i(7055),r=i(7750);t.exports=function(t){return s(r(t))}},1291:function(t,e,i){var s=i(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:s(e)}},8014:function(t,e,i){var s=i(1291),r=Math.min;t.exports=function(t){var e=s(t);return e>0?r(e,9007199254740991):0}},8981:function(t,e,i){var s=i(7750),r=Object;t.exports=function(t){return r(s(t))}},2777:function(t,e,i){var s=i(9565),r=i(34),n=i(757),o=i(5966),a=i(4270),l=i(8227),h=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!r(t)||n(t))return t;var i,l=o(t,c);if(l){if(void 0===e&&(e="default"),i=s(l,t,e),!r(i)||n(i))return i;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6969:function(t,e,i){var s=i(2777),r=i(757);t.exports=function(t){var e=s(t,"string");return r(e)?e:e+""}},2140:function(t,e,i){var s=i(8227),r=s("toStringTag"),n={};n[r]="z",t.exports="[object z]"===String(n)},655:function(t,e,i){var s=i(6955),r=String;t.exports=function(t){if("Symbol"===s(t))throw new TypeError("Cannot convert a Symbol value to a string");return r(t)}},9714:function(t,e,i){var s=i(9088);t.exports=function(t){try{if(s)return Function('return require("'+t+'")')()}catch(e){}}},6823:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(i){return"Object"}}},3392:function(t,e,i){var s=i(9504),r=0,n=Math.random(),o=s(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++r+n,36)}},7040:function(t,e,i){var s=i(4495);t.exports=s&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(t,e,i){var s=i(3724),r=i(9039);t.exports=s&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2812:function(t){var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},8622:function(t,e,i){var s=i(4475),r=i(4901),n=s.WeakMap;t.exports=r(n)&&/native code/.test(String(n))},8227:function(t,e,i){var s=i(4475),r=i(5745),n=i(9297),o=i(3392),a=i(4495),l=i(7040),h=s.Symbol,c=r("wks"),d=l?h["for"]||h:h&&h.withoutSetter||o;t.exports=function(t){return n(c,t)||(c[t]=a&&n(h,t)?h[t]:d("Symbol."+t)),c[t]}},6573:function(t,e,i){var s=i(3724),r=i(2106),n=i(3238),o=ArrayBuffer.prototype;s&&!("detached"in o)&&r(o,"detached",{configurable:!0,get:function(){return n(this)}})},7936:function(t,e,i){var s=i(6518),r=i(5636);r&&s({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return r(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(t,e,i){var s=i(6518),r=i(5636);r&&s({target:"ArrayBuffer",proto:!0},{transfer:function(){return r(this,arguments.length?arguments[0]:void 0,!0)}})},4114:function(t,e,i){var s=i(6518),r=i(8981),n=i(6198),o=i(4527),a=i(6837),l=i(9039),h=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},d=h||!c();s({target:"Array",proto:!0,arity:1,forced:d},{push:function(t){var e=r(this),i=n(e),s=arguments.length;a(i+s);for(var l=0;l<s;l++)e[i]=arguments[l],i++;return o(e,i),i}})},7467:function(t,e,i){var s=i(7628),r=i(4644),n=r.aTypedArray,o=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;o("toReversed",(function(){return s(n(this),a(this))}))},4732:function(t,e,i){var s=i(4644),r=i(9504),n=i(9306),o=i(5370),a=s.aTypedArray,l=s.getTypedArrayConstructor,h=s.exportTypedArrayMethod,c=r(s.TypedArrayPrototype.sort);h("toSorted",(function(t){void 0!==t&&n(t);var e=a(this),i=o(l(e),e);return c(i,t)}))},9577:function(t,e,i){var s=i(9928),r=i(4644),n=i(1108),o=i(1291),a=i(5854),l=r.aTypedArray,h=r.getTypedArrayConstructor,c=r.exportTypedArrayMethod,d=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();c("with",{with:function(t,e){var i=l(this),r=o(t),c=n(i)?a(e):+e;return s(i,h(i),r,c)}}["with"],!d)},4603:function(t,e,i){var s=i(6840),r=i(9504),n=i(655),o=i(2812),a=URLSearchParams,l=a.prototype,h=r(l.append),c=r(l["delete"]),d=r(l.forEach),p=r([].push),u=new a("a=1&a=2&b=3");u["delete"]("a",1),u["delete"]("b",void 0),u+""!=="a=2"&&s(l,"delete",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var s=[];d(this,(function(t,e){p(s,{key:e,value:t})})),o(e,1);var r,a=n(t),l=n(i),u=0,m=0,g=!1,f=s.length;while(u<f)r=s[u++],g||r.key===a?(g=!0,c(this,r.key)):m++;while(m<f)r=s[m++],r.key===a&&r.value===l||h(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},7566:function(t,e,i){var s=i(6840),r=i(9504),n=i(655),o=i(2812),a=URLSearchParams,l=a.prototype,h=r(l.getAll),c=r(l.has),d=new a("a=1");!d.has("a",2)&&d.has("a",void 0)||s(l,"has",(function(t){var e=arguments.length,i=e<2?void 0:arguments[1];if(e&&void 0===i)return c(this,t);var s=h(this,t);o(e,1);var r=n(i),a=0;while(a<s.length)if(s[a++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(t,e,i){var s=i(3724),r=i(9504),n=i(2106),o=URLSearchParams.prototype,a=r(o.forEach);s&&!("size"in o)&&n(o,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})}},i={};function s(t){var r=i[t];if(void 0!==r)return r.exports;var n=i[t]={exports:{}};return e[t].call(n.exports,n,n.exports,s),n.exports}!function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p=""}();var r={};return function(){if(s.r(r),s.d(r,{default:function(){return Ao}}),"undefined"!==typeof window){var t=window.document.currentScript,e=t&&t.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);e&&(s.p=e[1])}var i=s(9274);const n={class:"wg-main-layout"};function o(t,e,s,r,o,a){const l=(0,i.resolveComponent)("WidgetSelector"),h=(0,i.resolveComponent)("gridItem"),c=(0,i.resolveComponent)("gridster");return(0,i.openBlock)(),(0,i.createElementBlock)("div",n,[(0,i.createVNode)(l,{onChange:r.widgetSelectorEvent,onCancelEdit:r.onCancel,layoutName:s.layoutName},null,8,["onChange","onCancelEdit","layoutName"]),(0,i.createElementVNode)("div",{style:(0,i.normalizeStyle)([{height:"100%"},{paddingTop:r.data.widgetSelectorEvent.showSelector?"0":"50px"}])},[(0,i.createVNode)(c,{options:r.data.options},{default:(0,i.withCtx)((t=>[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.data.widgets,(e=>((0,i.openBlock)(),(0,i.createBlock)(h,{key:e,gridster:t.gridster,item:e,event:r.data.event},null,8,["gridster","item","event"])))),128))])),_:1},8,["options"])],4)])}const a={class:"gridster",ref:"root"};function l(t,e,s,r,n,o){const l=(0,i.resolveComponent)("GridPreview");return(0,i.openBlock)(),(0,i.createElementBlock)("div",a,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.dataReactive.gridsterComponent.gridColumns,((t,e)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"gridster-column",style:(0,i.normalizeStyle)(r.getGridColumnStyle(e)),key:e},null,4)))),128)),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.dataReactive.gridsterComponent.gridRows,((t,e)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"gridster-row",style:(0,i.normalizeStyle)(r.getGridRowStyle(e)),key:e},null,4)))),128)),r.dataReactive.ready?(0,i.renderSlot)(t.$slots,"default",{key:0,gridster:r.dataReactive.gridsterComponent}):(0,i.createCommentVNode)("",!0),(0,i.createVNode)(l,{previewStyle:r.dataReactive.gridsterComponent.previewStyle$,render:r.dataReactive.gridsterComponent.renderer,renderer:r.dataReactive.gridsterComponent.gridRenderer},null,8,["previewStyle","render","renderer"])],512)}s(4114);var h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},h(t,e)};function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function d(t,e,i,s){function r(t){return t instanceof i?t:new i((function(e){e(t)}))}return new(i||(i=Promise))((function(i,n){function o(t){try{l(s.next(t))}catch(e){n(e)}}function a(t){try{l(s["throw"](t))}catch(e){n(e)}}function l(t){t.done?i(t.value):r(t.value).then(o,a)}l((s=s.apply(t,e||[])).next())}))}function p(t,e){var i,s,r,n,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(t){return function(e){return l([t,e])}}function l(a){if(i)throw new TypeError("Generator is already executing.");while(n&&(n=0,a[0]&&(o=0)),o)try{if(i=1,s&&(r=2&a[0]?s["return"]:a[0]?s["throw"]||((r=s["return"])&&r.call(s),0):s.next)&&!(r=r.call(s,a[1])).done)return r;switch(s=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,s=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(l){a=[6,l],s=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,r,n=i.call(t),o=[];try{while((void 0===e||e-- >0)&&!(s=n.next()).done)o.push(s.value)}catch(a){r={error:a}}finally{try{s&&!s.done&&(i=n["return"])&&i.call(n)}finally{if(r)throw r.error}}return o}function g(t,e,i){if(i||2===arguments.length)for(var s,r=0,n=e.length;r<n;r++)!s&&r in e||(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function f(t){return this instanceof f?(this.v=t,this):new f(t)}function v(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=i.apply(t,e||[]),n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(t){r[t]&&(s[t]=function(e){return new Promise((function(i,s){n.push([t,e,i,s])>1||a(t,e)}))})}function a(t,e){try{l(r[t](e))}catch(i){d(n[0][3],i)}}function l(t){t.value instanceof f?Promise.resolve(t.value.v).then(h,c):d(n[0][2],t)}function h(t){a("next",t)}function c(t){a("throw",t)}function d(t,e){t(e),n.shift(),n.length&&a(n[0][0],n[0][1])}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"===typeof u?u(t):t[Symbol.iterator](),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise((function(s,n){e=t[i](e),r(s,n,e.done,e.value)}))}}function r(t,e,i,s){Promise.resolve(s).then((function(e){t({value:e,done:i})}),e)}}Object.create;"function"===typeof SuppressedError&&SuppressedError;function w(t){return"function"===typeof t}function b(t){var e=function(t){Error.call(t),t.stack=(new Error).stack},i=t(e);return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var x=b((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function C(t,e){if(t){var i=t.indexOf(e);0<=i&&t.splice(i,1)}}var I=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,i,s,r;if(!this.closed){this.closed=!0;var n=this._parentage;if(n)if(this._parentage=null,Array.isArray(n))try{for(var o=u(n),a=o.next();!a.done;a=o.next()){var l=a.value;l.remove(this)}}catch(v){t={error:v}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}else n.remove(this);var h=this.initialTeardown;if(w(h))try{h()}catch(y){r=y instanceof x?y.errors:[y]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var d=u(c),p=d.next();!p.done;p=d.next()){var f=p.value;try{k(f)}catch(b){r=null!==r&&void 0!==r?r:[],b instanceof x?r=g(g([],m(r)),m(b.errors)):r.push(b)}}}catch(C){i={error:C}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}if(r)throw new x(r)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)k(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&C(e,t)},t.prototype.remove=function(e){var i=this._finalizers;i&&C(i,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),E=I.EMPTY;function $(t){return t instanceof I||t&&"closed"in t&&w(t.remove)&&w(t.add)&&w(t.unsubscribe)}function k(t){w(t)?t():t.unsubscribe()}var S={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},T={setTimeout:function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var r=T.delegate;return(null===r||void 0===r?void 0:r.setTimeout)?r.setTimeout.apply(r,g([t,e],m(i))):setTimeout.apply(void 0,g([t,e],m(i)))},clearTimeout:function(t){var e=T.delegate;return((null===e||void 0===e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function M(t){T.setTimeout((function(){var e=S.onUnhandledError;if(!e)throw t;e(t)}))}function P(){}var z=function(){return R("C",void 0,void 0)}();function L(t){return R("E",void 0,t)}function B(t){return R("N",t,void 0)}function R(t,e,i){return{kind:t,value:e,error:i}}var V=null;function N(t){if(S.useDeprecatedSynchronousErrorHandling){var e=!V;if(e&&(V={errorThrown:!1,error:null}),t(),e){var i=V,s=i.errorThrown,r=i.error;if(V=null,s)throw r}}else t()}function A(t){S.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=t)}var D=function(t){function e(e){var i=t.call(this)||this;return i.isStopped=!1,e?(i.destination=e,$(e)&&e.add(i)):i.destination=j,i}return c(e,t),e.create=function(t,e,i){return new W(t,e,i)},e.prototype.next=function(t){this.isStopped?X(B(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?X(L(t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?X(z,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(I),F=Function.prototype.bind;function O(t,e){return F.call(t,e)}var H=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(i){_(i)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(i){_(i)}else _(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){_(e)}},t}(),W=function(t){function e(e,i,s){var r,n,o=t.call(this)||this;w(e)||!e?r={next:null!==e&&void 0!==e?e:void 0,error:null!==i&&void 0!==i?i:void 0,complete:null!==s&&void 0!==s?s:void 0}:o&&S.useDeprecatedNextContext?(n=Object.create(e),n.unsubscribe=function(){return o.unsubscribe()},r={next:e.next&&O(e.next,n),error:e.error&&O(e.error,n),complete:e.complete&&O(e.complete,n)}):r=e;return o.destination=new H(r),o}return c(e,t),e}(D);function _(t){S.useDeprecatedSynchronousErrorHandling?A(t):M(t)}function Y(t){throw t}function X(t,e){var i=S.onStoppedNotification;i&&T.setTimeout((function(){return i(t,e)}))}var j={closed:!0,next:P,error:Y,complete:P},U=function(){return"function"===typeof Symbol&&Symbol.observable||"@@observable"}();function G(t){return t}function q(t){return 0===t.length?G:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Z=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var s=this,r=Q(t)?t:new W(t,e,i);return N((function(){var t=s,e=t.operator,i=t.source;r.add(e?e.call(r,i):i?s._subscribe(r):s._trySubscribe(r))})),r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return e=K(e),new e((function(e,s){var r=new W({next:function(e){try{t(e)}catch(i){s(i),r.unsubscribe()}},error:s,complete:e});i.subscribe(r)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[U]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return q(t)(this)},t.prototype.toPromise=function(t){var e=this;return t=K(t),new t((function(t,i){var s;e.subscribe((function(t){return s=t}),(function(t){return i(t)}),(function(){return t(s)}))}))},t.create=function(e){return new t(e)},t}();function K(t){var e;return null!==(e=null!==t&&void 0!==t?t:S.Promise)&&void 0!==e?e:Promise}function J(t){return t&&w(t.next)&&w(t.error)&&w(t.complete)}function Q(t){return t&&t instanceof D||J(t)&&$(t)}var tt=b((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),et=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return c(e,t),e.prototype.lift=function(t){var e=new it(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new tt},e.prototype.next=function(t){var e=this;N((function(){var i,s;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var r=u(e.currentObservers),n=r.next();!n.done;n=r.next()){var o=n.value;o.next(t)}}catch(a){i={error:a}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(i)throw i.error}}}}))},e.prototype.error=function(t){var e=this;N((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;var i=e.observers;while(i.length)i.shift().error(t)}}))},e.prototype.complete=function(){var t=this;N((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;var e=t.observers;while(e.length)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,i=this,s=i.hasError,r=i.isStopped,n=i.observers;return s||r?E:(this.currentObservers=null,n.push(t),new I((function(){e.currentObservers=null,C(n,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,i=e.hasError,s=e.thrownError,r=e.isStopped;i?t.error(s):r&&t.complete()},e.prototype.asObservable=function(){var t=new Z;return t.source=this,t},e.create=function(t,e){return new it(t,e)},e}(Z),it=function(t){function e(e,i){var s=t.call(this)||this;return s.destination=e,s.source=i,s}return c(e,t),e.prototype.next=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)},e.prototype.error=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:E},e}(et),st=function(t){function e(e,i){return t.call(this)||this}return c(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(I),rt={setInterval:function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var r=rt.delegate;return(null===r||void 0===r?void 0:r.setInterval)?r.setInterval.apply(r,g([t,e],m(i))):setInterval.apply(void 0,g([t,e],m(i)))},clearInterval:function(t){var e=rt.delegate;return((null===e||void 0===e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},nt=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.scheduler=e,s.work=i,s.pending=!1,s}return c(e,t),e.prototype.schedule=function(t,e){var i;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var s=this.id,r=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(r,s,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),rt.setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&rt.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i,s=!1;try{this.work(t)}catch(r){s=!0,i=r||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},e.prototype.unsubscribe=function(){if(!this.closed){var e=this,i=e.id,s=e.scheduler,r=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,C(r,this),null!=i&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(st),ot={now:function(){return(ot.delegate||Date).now()},delegate:void 0},at=function(){function t(e,i){void 0===i&&(i=t.now),this.schedulerActionCtor=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},t.now=ot.now,t}(),lt=function(t){function e(e,i){void 0===i&&(i=at.now);var s=t.call(this,e,i)||this;return s.actions=[],s._active=!1,s}return c(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){while(t=e.shift())t.unsubscribe();throw i}}},e}(at),ht=new lt(nt),ct=ht;function dt(t){return w(null===t||void 0===t?void 0:t.lift)}function pt(t){return function(e){if(dt(e))return e.lift((function(e){try{return t(e,this)}catch(i){this.error(i)}}));throw new TypeError("Unable to lift unknown Observable type")}}function ut(t,e,i,s,r){return new mt(t,e,i,s,r)}var mt=function(t){function e(e,i,s,r,n,o){var a=t.call(this,e)||this;return a.onFinalize=n,a.shouldUnsubscribe=o,a._next=i?function(t){try{i(t)}catch(s){e.error(s)}}:t.prototype._next,a._error=r?function(t){try{r(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=s?function(){try{s()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return c(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(D);function gt(t,e){return void 0===e&&(e=ht),pt((function(i,s){var r=null,n=null,o=null,a=function(){if(r){r.unsubscribe(),r=null;var t=n;n=null,s.next(t)}};function l(){var i=o+t,n=e.now();if(n<i)return r=this.schedule(void 0,i-n),void s.add(r);a()}i.subscribe(ut(s,(function(i){n=i,o=e.now(),r||(r=e.schedule(l,t),s.add(r))}),(function(){a(),s.complete()}),void 0,(function(){n=r=null})))}))}var ft=function(t){return t&&"number"===typeof t.length&&"function"!==typeof t};function vt(t){return w(null===t||void 0===t?void 0:t.then)}function yt(t){return w(t[U])}function wt(t){return Symbol.asyncIterator&&w(null===t||void 0===t?void 0:t[Symbol.asyncIterator])}function bt(t){return new TypeError("You provided "+(null!==t&&"object"===typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function xt(){return"function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ct,It,Et,$t,kt=xt();function St(t){return w(null===t||void 0===t?void 0:t[kt])}function Tt(t){return v(this,arguments,(function(){var e,i,s,r;return p(this,(function(n){switch(n.label){case 0:e=t.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,f(e.read())];case 3:return i=n.sent(),s=i.value,r=i.done,r?[4,f(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,f(s)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function Mt(t){return w(null===t||void 0===t?void 0:t.getReader)}function Pt(t){if(t instanceof Z)return t;if(null!=t){if(yt(t))return zt(t);if(ft(t))return Lt(t);if(vt(t))return Bt(t);if(wt(t))return Vt(t);if(St(t))return Rt(t);if(Mt(t))return Nt(t)}throw bt(t)}function zt(t){return new Z((function(e){var i=t[U]();if(w(i.subscribe))return i.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}function Lt(t){return new Z((function(e){for(var i=0;i<t.length&&!e.closed;i++)e.next(t[i]);e.complete()}))}function Bt(t){return new Z((function(e){t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,M)}))}function Rt(t){return new Z((function(e){var i,s;try{for(var r=u(t),n=r.next();!n.done;n=r.next()){var o=n.value;if(e.next(o),e.closed)return}}catch(a){i={error:a}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(i)throw i.error}}e.complete()}))}function Vt(t){return new Z((function(e){At(t,e).catch((function(t){return e.error(t)}))}))}function Nt(t){return Vt(Tt(t))}function At(t,e){var i,s,r,n;return d(this,void 0,void 0,(function(){var o,a;return p(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),i=y(t),l.label=1;case 1:return[4,i.next()];case 2:if(s=l.sent(),s.done)return[3,4];if(o=s.value,e.next(o),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),r={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),s&&!s.done&&(n=i.return)?[4,n.call(i)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))}function Dt(t){return pt((function(e,i){Pt(t).subscribe(ut(i,(function(){return i.complete()}),P)),!i.closed&&e.subscribe(i)}))}function Ft(t,e){return pt((function(i,s){var r=null,n=0,o=!1,a=function(){return o&&!r&&s.complete()};i.subscribe(ut(s,(function(i){null===r||void 0===r||r.unsubscribe();var o=0,l=n++;Pt(t(i,l)).subscribe(r=ut(s,(function(t){return s.next(e?e(i,t,l,o++):t)}),(function(){r=null,a()})))}),(function(){o=!0,a()})))}))}function Ot(t){return t&&w(t.schedule)}function Ht(t){return t instanceof Date&&!isNaN(t)}function Wt(t,e,i){void 0===t&&(t=0),void 0===i&&(i=ct);var s=-1;return null!=e&&(Ot(e)?i=e:s=e),new Z((function(e){var r=Ht(t)?+t-i.now():t;r<0&&(r=0);var n=0;return i.schedule((function(){e.closed||(e.next(n++),0<=s?this.schedule(void 0,s):e.complete())}),r)}))}function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Yt(t,e){if("object"!=_t(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=_t(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function Xt(t){var e=Yt(t,"string");return"symbol"==_t(e)?e:e+""}function jt(t,e,i){return e=Xt(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Ut{constructor(){jt(this,"observer",void 0)}complete(){}next(t){this.observer&&this.observer(t)}emit(t){throw new Error("Method not implemented.")}subscribe(t,e,i){this.observer=t}}class Gt{listen(t,e,i){if("string"!=typeof t){let s=t;return s.addEventListener(e,i),()=>s.removeEventListener(e,i)}switch(t){case"window":return window.addEventListener(e,i),()=>window.removeEventListener(e,i);case"document":return document.addEventListener(e,i),()=>document.removeEventListener(e,i);default:throw new Error(`Method not implemented. ${t}`)}}removeClass(t,e){t.classList.remove(e)}addClass(t,e){t.classList.add(e)}setStyle(t,e,i){t.style[e]=i}}class qt{runOutsideAngular(t){t()}run(t){t()}}class Zt{markForCheck(){}}(function(t){t["Fit"]="fit",t["ScrollVertical"]="scrollVertical",t["ScrollHorizontal"]="scrollHorizontal",t["Fixed"]="fixed",t["VerticalFixed"]="verticalFixed",t["HorizontalFixed"]="horizontalFixed"})(Ct||(Ct={})),function(t){t["Always"]="always",t["OnDragAndResize"]="onDrag&Resize",t["None"]="none"}(It||(It={})),function(t){t["None"]="none",t["CompactUp"]="compactUp",t["CompactLeft"]="compactLeft",t["CompactUpAndLeft"]="compactUp&Left",t["CompactLeftAndUp"]="compactLeft&Up",t["CompactRight"]="compactRight",t["CompactUpAndRight"]="compactUp&Right",t["CompactRightAndUp"]="compactRight&Up",t["CompactDown"]="compactDown",t["CompactDownAndLeft"]="compactDown&Left",t["CompactLeftAndDown"]="compactLeft&Down",t["CompactDownAndRight"]="compactDown&Right",t["CompactRightAndDown"]="compactRight&Down"}(Et||(Et={})),function(t){t["LTR"]="ltr",t["RTL"]="rtl"}($t||($t={}));class Kt{constructor(t){jt(this,"gridster",void 0),this.gridster=t}destroy(){this.gridster=null}checkCompact(){this.gridster.$options.compactType!==Et.None&&(this.gridster.$options.compactType===Et.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===Et.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===Et.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Et.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Et.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===Et.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Et.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Et.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===Et.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Et.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Et.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===Et.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(t){this.gridster.$options.compactType!==Et.None&&(this.gridster.$options.compactType===Et.CompactUp?this.moveTillCollision(t,"y",-1):this.gridster.$options.compactType===Et.CompactLeft?this.moveTillCollision(t,"x",-1):this.gridster.$options.compactType===Et.CompactUpAndLeft?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===Et.CompactLeftAndUp?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",-1)):this.gridster.$options.compactType===Et.CompactUpAndRight?(this.moveTillCollision(t,"y",-1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===Et.CompactDown?this.moveTillCollision(t,"y",1):this.gridster.$options.compactType===Et.CompactDownAndLeft?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",-1)):this.gridster.$options.compactType===Et.CompactLeftAndDown?(this.moveTillCollision(t,"x",-1),this.moveTillCollision(t,"y",1)):this.gridster.$options.compactType===Et.CompactDownAndRight?(this.moveTillCollision(t,"y",1),this.moveTillCollision(t,"x",1)):this.gridster.$options.compactType===Et.CompactRightAndDown&&(this.moveTillCollision(t,"x",1),this.moveTillCollision(t,"y",1)))}checkCompactMovement(t,e){let i=!1;this.gridster.grid.forEach((s=>{if(!1!==s.$item.compactEnabled){const r=this.moveTillCollision(s.$item,t,e);r&&(i=!0,s.item[t]=s.$item[t],s.itemChanged())}})),i&&this.checkCompact()}moveTillCollision(t,e,i){return t[e]+=i,this.gridster.checkCollision(t)?(t[e]-=i,!1):(this.moveTillCollision(t,e,i),!0)}}const Jt={gridType:Ct.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:Et.None,mobileBreakpoint:640,useBodyForBreakpoint:!1,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:It.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,enableBoundaryControl:!1,disableAutoPositionOnConflict:!1,dirType:$t.LTR};class Qt{static merge(t,e,i){for(const s in e)void 0!==e[s]&&i.hasOwnProperty(s)&&("object"===typeof e[s]?(s in t||(t[s]={}),t[s]=Qt.merge(t[s],e[s],i[s])):t[s]=e[s]);return t}static checkTouchEvent(t){void 0===t.clientX&&t.touches&&(t.touches&&t.touches.length?(t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY):t.changedTouches&&t.changedTouches.length&&(t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY))}static checkContentClassForEvent(t,e){if(t.$options.draggable.ignoreContent){if(!Qt.checkDragHandleClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass,t.$options.draggable.ignoreContentClass))return!0}else if(Qt.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(t,e){return Qt.checkContentClass(e.target,e.currentTarget,t.$options.draggable.ignoreContentClass)||Qt.checkContentClass(e.target,e.currentTarget,t.$options.draggable.dragHandleClass)}static checkDragHandleClass(t,e,i,s){if(!t||t===e)return!1;if(t.hasAttribute("class")){const e=t.getAttribute("class").split(" ");if(e.indexOf(i)>-1)return!0;if(e.indexOf(s)>-1)return!1}return Qt.checkDragHandleClass(t.parentNode,e,i,s)}static checkContentClass(t,e,i){return!(!t||t===e)&&(!!(t.hasAttribute("class")&&t.getAttribute("class").split(" ").indexOf(i)>-1)||Qt.checkContentClass(t.parentNode,e,i))}static compareItems(t,e){return t.y>e.y?-1:t.y<e.y?1:t.x>e.x?-1:1}}class te{constructor(t){jt(this,"gridster",void 0),jt(this,"initialItem",void 0),jt(this,"removeEmptyCellClickListenerFn",void 0),jt(this,"removeEmptyCellTouchendListenerFn",void 0),jt(this,"removeEmptyCellContextMenuListenerFn",void 0),jt(this,"removeEmptyCellDropListenerFn",void 0),jt(this,"removeEmptyCellMousedownListenerFn",void 0),jt(this,"removeEmptyCellTouchstartListenerFn",void 0),jt(this,"removeWindowMousemoveListenerFn",void 0),jt(this,"removeWindowTouchmoveListenerFn",void 0),jt(this,"removeWindowMouseupListenerFn",void 0),jt(this,"removeWindowTouchendListenerFn",void 0),jt(this,"removeEmptyCellDragoverListenerFn",void 0),jt(this,"removeDocumentDragendListenerFn",void 0),jt(this,"emptyCellClickCb",(t=>{if(!this.gridster||this.gridster.movingItem||Qt.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;const e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(t,e),this.gridster.cdRef.markForCheck())})),jt(this,"emptyCellContextMenuCb",(t=>{if(this.gridster.movingItem||Qt.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;t.preventDefault(),t.stopPropagation();const e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(t,e),this.gridster.cdRef.markForCheck())})),jt(this,"emptyCellDragDrop",(t=>{const e=this.getValidItemFromEvent(t);e&&(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(t,e),this.gridster.cdRef.markForCheck())})),jt(this,"emptyCellDragOver",(t=>{t.preventDefault(),t.stopPropagation();const e=this.getValidItemFromEvent(t);e?(t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.gridster.movingItem=e):(t.dataTransfer&&(t.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()})),jt(this,"emptyCellMouseDown",(t=>{if(Qt.checkContentClassForEmptyCellClickEvent(this.gridster,t))return;t.preventDefault(),t.stopPropagation();const e=this.getValidItemFromEvent(t),i=1;e&&(t.buttons===i||t instanceof TouchEvent)&&(this.initialItem=e,this.gridster.movingItem=e,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular((()=>{this.removeWindowMousemoveListenerFn=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove),this.removeWindowTouchmoveListenerFn=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove)})),this.removeWindowMouseupListenerFn=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp),this.removeWindowTouchendListenerFn=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp))})),jt(this,"emptyCellMouseMove",(t=>{t.preventDefault(),t.stopPropagation();const e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e,this.gridster.previewStyle())})),jt(this,"emptyCellMouseUp",(t=>{this.removeWindowMousemoveListenerFn(),this.removeWindowTouchmoveListenerFn(),this.removeWindowMouseupListenerFn(),this.removeWindowTouchendListenerFn();const e=this.getValidItemFromEvent(t,this.initialItem);e&&(this.gridster.movingItem=e),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(t,this.gridster.movingItem),setTimeout((()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})),this.gridster.cdRef.markForCheck()})),this.gridster=t}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),this.gridster.movingItem=null,this.initialItem=this.gridster=null,this.removeDocumentDragendListenerFn&&(this.removeDocumentDragendListenerFn(),this.removeDocumentDragendListenerFn=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.removeEmptyCellClickListenerFn&&this.gridster.options.emptyCellClickCallback?(this.removeEmptyCellClickListenerFn=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb),this.removeEmptyCellTouchendListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb)):!this.gridster.$options.enableEmptyCellClick&&this.removeEmptyCellClickListenerFn&&this.removeEmptyCellTouchendListenerFn&&(this.removeEmptyCellClickListenerFn(),this.removeEmptyCellTouchendListenerFn(),this.removeEmptyCellClickListenerFn=null,this.removeEmptyCellTouchendListenerFn=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.removeEmptyCellContextMenuListenerFn&&this.gridster.options.emptyCellContextMenuCallback?this.removeEmptyCellContextMenuListenerFn=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb):!this.gridster.$options.enableEmptyCellContextMenu&&this.removeEmptyCellContextMenuListenerFn&&(this.removeEmptyCellContextMenuListenerFn(),this.removeEmptyCellContextMenuListenerFn=null),this.gridster.$options.enableEmptyCellDrop&&!this.removeEmptyCellDropListenerFn&&this.gridster.options.emptyCellDropCallback?(this.removeEmptyCellDropListenerFn=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop),this.gridster.zone.runOutsideAngular((()=>{this.removeEmptyCellDragoverListenerFn=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver)})),this.removeDocumentDragendListenerFn=this.gridster.renderer.listen("document","dragend",(()=>{this.gridster.movingItem=null,this.gridster.previewStyle()}))):!this.gridster.$options.enableEmptyCellDrop&&this.removeEmptyCellDropListenerFn&&this.removeEmptyCellDragoverListenerFn&&this.removeDocumentDragendListenerFn&&(this.removeEmptyCellDropListenerFn(),this.removeEmptyCellDragoverListenerFn(),this.removeDocumentDragendListenerFn(),this.removeEmptyCellDragoverListenerFn=null,this.removeEmptyCellDropListenerFn=null,this.removeDocumentDragendListenerFn=null),this.gridster.$options.enableEmptyCellDrag&&!this.removeEmptyCellMousedownListenerFn&&this.gridster.options.emptyCellDragCallback?(this.removeEmptyCellMousedownListenerFn=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown),this.removeEmptyCellTouchstartListenerFn=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown)):!this.gridster.$options.enableEmptyCellDrag&&this.removeEmptyCellMousedownListenerFn&&this.removeEmptyCellTouchstartListenerFn&&(this.removeEmptyCellMousedownListenerFn(),this.removeEmptyCellTouchstartListenerFn(),this.removeEmptyCellMousedownListenerFn=null,this.removeEmptyCellTouchstartListenerFn=null)}getPixelsX(t,e){const i=this.gridster.options.scale;return i?(t.clientX-e.left)/i+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():t.clientX+this.gridster.el.scrollLeft-e.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(t,e){const i=this.gridster.options.scale;return i?(t.clientY-e.top)/i+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():t.clientY+this.gridster.el.scrollTop-e.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(t,e){t.preventDefault(),t.stopPropagation(),Qt.checkTouchEvent(t);const i=this.gridster.el.getBoundingClientRect(),s=this.getPixelsX(t,i),r=this.getPixelsY(t,i),n={x:this.gridster.pixelsToPositionX(s,Math.floor,!0),y:this.gridster.pixelsToPositionY(r,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(e&&(n.cols=Math.min(Math.abs(e.x-n.x)+1,this.gridster.$options.emptyCellDragMaxCols),n.rows=Math.min(Math.abs(e.y-n.y)+1,this.gridster.$options.emptyCellDragMaxRows),e.x<n.x?n.x=e.x:e.x-n.x>this.gridster.$options.emptyCellDragMaxCols-1&&(n.x=this.gridster.movingItem?this.gridster.movingItem.x:0),e.y<n.y?n.y=e.y:e.y-n.y>this.gridster.$options.emptyCellDragMaxRows-1&&(n.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(n))return n}}class ee{constructor(t){jt(this,"gridster",void 0),jt(this,"lastGridColumnStyles",{}),jt(this,"lastGridRowStyles",{}),this.gridster=t}destroy(){this.gridster=null}updateItem(t,e,i){if(this.gridster.mobile)this.clearCellPosition(i,t),this.gridster.$options.keepFixedHeightInMobile?i.setStyle(t,"height",(e.rows-1)*this.gridster.$options.margin+e.rows*this.gridster.$options.fixedRowHeight+"px"):i.setStyle(t,"height",e.rows*this.gridster.curWidth/e.cols+"px"),this.gridster.$options.keepFixedWidthInMobile?i.setStyle(t,"width",this.gridster.$options.fixedColWidth+"px"):i.setStyle(t,"width",""),i.setStyle(t,"margin-bottom",this.gridster.$options.margin+"px"),i.setStyle(t,$t.LTR?"margin-right":"margin-left","");else{const s=Math.round(this.gridster.curColWidth*e.x),r=Math.round(this.gridster.curRowHeight*e.y),n=this.gridster.curColWidth*e.cols-this.gridster.$options.margin,o=this.gridster.curRowHeight*e.rows-this.gridster.$options.margin;this.setCellPosition(i,t,s,r),i.setStyle(t,"width",n+"px"),i.setStyle(t,"height",o+"px");let a=null,l=null;this.gridster.$options.outerMargin&&(this.gridster.rows===e.rows+e.y&&(a=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===e.cols+e.x&&(l=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),i.setStyle(t,"margin-bottom",a),i.setStyle(t,$t.LTR?"margin-right":"margin-left",l)}}updateGridster(){let t="",e="",i="",s="";if(this.gridster.$options.gridType===Ct.Fit)t=Ct.Fit,e=Ct.ScrollVertical,i=Ct.ScrollHorizontal,s=Ct.Fixed;else if(this.gridster.$options.gridType===Ct.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,t=Ct.ScrollVertical,e=Ct.Fit,i=Ct.ScrollHorizontal,s=Ct.Fixed;else if(this.gridster.$options.gridType===Ct.ScrollHorizontal){const r=this.gridster.$options.rowHeightRatio,n=r>=1?r:r+1;this.gridster.curColWidth=this.gridster.curRowHeight*n,t=Ct.ScrollHorizontal,e=Ct.Fit,i=Ct.ScrollVertical,s=Ct.Fixed}else this.gridster.$options.gridType===Ct.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=Ct.Fixed,e=Ct.Fit,i=Ct.ScrollVertical,s=Ct.ScrollHorizontal):this.gridster.$options.gridType===Ct.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=Ct.ScrollVertical,e=Ct.Fit,i=Ct.ScrollHorizontal,s=Ct.Fixed):this.gridster.$options.gridType===Ct.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),t=Ct.ScrollHorizontal,e=Ct.Fit,i=Ct.ScrollVertical,s=Ct.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==Ct.Fit?this.gridster.renderer.removeClass(this.gridster.el,t):this.gridster.renderer.addClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,e),this.gridster.renderer.removeClass(this.gridster.el,i),this.gridster.renderer.removeClass(this.gridster.el,s)}getGridColumnStyle(t){const e={left:this.gridster.curColWidth*t,width:this.gridster.curColWidth-this.gridster.$options.margin,height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style={...this.getLeftPosition(e.left),width:e.width+"px",height:e.height+"px"};const i=this.lastGridColumnStyles[t];return i&&i.left===e.left&&i.width===e.width&&i.height===e.height?i.style:(this.lastGridColumnStyles[t]=e,e.style)}getGridRowStyle(t){const e={top:this.gridster.curRowHeight*t,width:this.gridster.gridColumns.length*this.gridster.curColWidth+this.gridster.$options.margin,height:this.gridster.curRowHeight-this.gridster.$options.margin,style:{}};e.style={...this.getTopPosition(e.top),width:e.width+"px",height:e.height+"px"};const i=this.lastGridRowStyles[t];return i&&i.top===e.top&&i.width===e.width&&i.height===e.height?i.style:(this.lastGridRowStyles[t]=e,e.style)}getLeftPosition(t){const e=this.gridster.$options.dirType===$t.RTL?-t:t;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+e+"px)"}:{left:this.getLeftMargin()+e+"px"}}getTopPosition(t){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+t+"px)"}:{top:this.getTopMargin()+t+"px"}}clearCellPosition(t,e){this.gridster.$options.useTransformPositioning?t.setStyle(e,"transform",""):(t.setStyle(e,"top",""),t.setStyle(e,"left",""))}setCellPosition(t,e,i,s){const r=this.gridster.$options.dirType===$t.RTL?-i:i;if(this.gridster.$options.useTransformPositioning){const i="translate3d("+r+"px, "+s+"px, 0)";t.setStyle(e,"transform",i)}else t.setStyle(e,"left",this.getLeftMargin()+r+"px"),t.setStyle(e,"top",this.getTopMargin()+s+"px")}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}class ie{constructor(t,e){jt(this,"$options",void 0),jt(this,"grid",void 0),jt(this,"el",void 0),jt(this,"renderer",void 0),jt(this,"gridRenderer",void 0),jt(this,"cdRef",void 0),jt(this,"options",void 0),jt(this,"calculateLayout$",void 0),jt(this,"movingItem",void 0),jt(this,"mobile",void 0),jt(this,"curWidth",void 0),jt(this,"curHeight",void 0),jt(this,"columns",void 0),jt(this,"rows",void 0),jt(this,"curColWidth",void 0),jt(this,"curRowHeight",void 0),jt(this,"windowResize",void 0),jt(this,"dragInProgress",void 0),jt(this,"emptyCell",void 0),jt(this,"compact",void 0),jt(this,"zone",void 0),jt(this,"gridRows",void 0),jt(this,"gridColumns",void 0),jt(this,"previewStyle$",new Ut),jt(this,"resize$",void 0),jt(this,"destroy$",void 0),jt(this,"onResize",(()=>{this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())})),jt(this,"getNextPossiblePosition",((t,e={})=>{-1===t.cols&&(t.cols=this.$options.defaultItemCols),-1===t.rows&&(t.rows=this.$options.defaultItemRows),this.setGridDimensions();let i,s=e.y||0;for(;s<this.rows;s++)for(t.y=s,i=e.x||0;i<this.columns;i++)if(t.x=i,!this.checkCollision(t))return!0;const r=this.$options.maxRows>=this.rows+t.rows,n=this.$options.maxCols>=this.columns+t.cols,o=this.rows<=this.columns&&r;return!o&&n?(t.x=this.columns,t.y=0,!0):!!r&&(t.y=this.rows,t.x=0,!0)})),jt(this,"getLastPossiblePosition",(t=>{let e={y:0,x:0};e=this.grid.reduce(((t,e)=>{const i={y:e.$item.y+e.$item.rows-1,x:e.$item.x+e.$item.cols-1};return 1===Qt.compareItems(t,i)?i:t}),e);const i=Object.assign({},t);return this.getNextPossiblePosition(i,e),i})),jt(this,"getFirstPossiblePosition",(t=>{const e=Object.assign({},t);return this.getNextPossiblePosition(e),e})),jt(this,"optionsChanged",(()=>{this.setOptions();let t,e=this.grid.length-1;for(;e>=0;e--)t=this.grid[e],t.updateOptions();this.calculateLayout()})),this.el=e,this.renderer=t,this.$options=JSON.parse(JSON.stringify(Jt)),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.gridColumns=[],this.gridRows=[],this.emptyCell=new te(this),this.compact=new Kt(this),this.gridRenderer=new ee(this),this.zone=new qt,this.cdRef=new Zt}static checkCollisionTwoItemsForSwaping(t,e){const i=1===t.cols?0:1,s=1===e.cols?0:1,r=1===t.rows?0:1,n=1===e.rows?0:1;return t.x+i<e.x+e.cols&&t.x+t.cols>e.x+s&&t.y+r<e.y+e.rows&&t.y+t.rows>e.y+n}resize(){let t,e;"fit"!==this.$options.gridType||this.mobile?(e=this.el.clientWidth,t=this.el.clientHeight):(e=this.el.offsetWidth,t=this.el.offsetHeight),e===this.curWidth&&t===this.curHeight||!this.checkIfToResize()||this.onResize()}checkIfToResize(){const t=this.el.clientWidth,e=this.el.offsetWidth,i=this.el.scrollWidth,s=this.el.clientHeight,r=this.el.offsetHeight,n=this.el.scrollHeight,o=t<e&&n>r&&n-r<e-t,a=s<r&&i>e&&i-e<r-s;return!o&&!a}checkIfMobile(){return this.$options.useBodyForBreakpoint?this.$options.mobileBreakpoint>document.body.clientWidth:this.$options.mobileBreakpoint>this.curWidth}checkCollisionTwoItems(t,e){const i=t.x<e.x+e.cols&&t.x+t.cols>e.x&&t.y<e.y+e.rows&&t.y+t.rows>e.y;if(!i)return!1;if(!this.$options.allowMultiLayer)return!0;const s=this.$options.defaultLayerIndex,r=void 0===t.layerIndex?s:t.layerIndex,n=void 0===e.layerIndex?s:e.layerIndex;return r===n}checkCollision(t){let e=!1;if(this.options.itemValidateCallback&&(e=!this.options.itemValidateCallback(t)),!e&&this.checkGridCollision(t)&&(e=!0),!e){const i=this.findItemWithItem(t);i&&(e=i)}return e}checkCollisionForSwaping(t){let e=!1;if(this.options.itemValidateCallback&&(e=!this.options.itemValidateCallback(t)),!e&&this.checkGridCollision(t)&&(e=!0),!e){const i=this.findItemWithItemForSwapping(t);i&&(e=i)}return e}positionXToPixels(t){return t*this.curColWidth}positionYToPixels(t){return t*this.curRowHeight}getItemComponent(t){return this.grid.find((e=>e.item===t))}pixelsToPositionX(t,e,i){const s=e(t/this.curColWidth);return i?s:Math.max(s,0)}pixelsToPositionY(t,e,i){const s=e(t/this.curRowHeight);return i?s:Math.max(s,0)}findItemWithItem(t){let e,s=0;for(;s<this.grid.length;s++)if(e=this.grid[s],(0,i.toRaw)(e.$item)!==(0,i.toRaw)(t)&&this.checkCollisionTwoItems(e.$item,t))return e;return!1}findItemsWithItem(t){const e=[];let s,r=0;for(;r<this.grid.length;r++)s=this.grid[r],(0,i.toRaw)(s.$item)!==(0,i.toRaw)(t)&&this.checkCollisionTwoItems(s.$item,t)&&e.push(s);return e}autoPositionItem(t){this.getNextPossiblePosition(t.$item)?(t.notPlaced=!1,t.item.x=t.$item.x,t.item.y=t.$item.y,t.itemChanged()):(t.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(t.item,["cols","rows","x","y"])))}checkGridCollision(t){const e=t.y>-1&&t.x>-1,i=t.cols+t.x<=this.$options.maxCols,s=t.rows+t.y<=this.$options.maxRows,r=void 0===t.maxItemCols?this.$options.maxItemCols:t.maxItemCols,n=void 0===t.minItemCols?this.$options.minItemCols:t.minItemCols,o=void 0===t.maxItemRows?this.$options.maxItemRows:t.maxItemRows,a=void 0===t.minItemRows?this.$options.minItemRows:t.minItemRows,l=t.cols<=r&&t.cols>=n,h=t.rows<=o&&t.rows>=a,c=void 0===t.minItemArea?this.$options.minItemArea:t.minItemArea,d=void 0===t.maxItemArea?this.$options.maxItemArea:t.maxItemArea,p=t.cols*t.rows,u=c<=p,m=d>=p;return!(e&&i&&s&&l&&h&&u&&m)}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):"none"!==this.$options.displayGrid&&this.dragInProgress&&!this.mobile||this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=ie.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=ie.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(t){void 0===t.$item.cols&&(t.$item.cols=this.$options.defaultItemCols,t.item.cols=t.$item.cols,t.itemChanged()),void 0===t.$item.rows&&(t.$item.rows=this.$options.defaultItemRows,t.item.rows=t.$item.rows,t.itemChanged()),-1===t.$item.x||-1===t.$item.y?this.autoPositionItem(t):this.checkCollision(t.$item)&&(this.$options.disableWarnings||(t.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(t.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?t.notPlaced=!0:this.autoPositionItem(t)),this.grid.push(t),this.calculateLayout$.next()}findItemWithItemForSwapping(t){let e,i=this.grid.length-1;for(;i>-1;i--)if(e=this.grid[i],e.$item!==t&&ie.checkCollisionTwoItemsForSwaping(e.$item,t))return e;return!1}removeItem(t){this.grid.splice(this.grid.indexOf(t),1),this.calculateLayout$.next(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(t.item,t)}previewStyle(t=!1){this.movingItem?(this.compact&&t&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}setGridSize(){const t=this.el;let e,i;this.$options.setGridSize||this.$options.gridType===Ct.Fit&&!this.mobile?(e=t.offsetWidth,i=t.offsetHeight):(e=t.clientWidth,i=t.clientHeight),this.curWidth=e,this.curHeight=i}setGridDimensions(){this.setGridSize(),!this.mobile&&this.checkIfMobile()?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&!this.checkIfMobile()&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let t,e=this.$options.minRows,i=this.$options.minCols,s=this.grid.length-1;for(;s>=0;s--)t=this.grid[s],t.notPlaced||(e=Math.max(e,t.$item.y+t.$item.rows),i=Math.max(i,t.$item.x+t.$item.cols));e+=this.$options.addEmptyRowsCount,this.columns===i&&this.rows===e||(this.columns=i,this.rows=e,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}static getNewArrayLength(t,e,i){const s=Math.max(t,Math.floor(e/i));return s<0?0:Number.isFinite(s)?Math.floor(s):0}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let t=-this.$options.margin;null!==this.$options.outerMarginLeft?(t+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(t+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(t+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-t)/this.columns;let e=-this.$options.margin;null!==this.$options.outerMarginTop?(e+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(e+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(e+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-e)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let t,e=this.grid.length-1;for(;e>=0;e--)t=this.grid[e],t.setSize(),t.drag.toggle(),t.resize.toggle();this.resize$.next()}setOptions(){this.$options=Qt.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize),this.emptyCell.updateOptions()}onChanges(t){this.setOptions(),this.options.api={optionsChanged:this.optionsChanged,resize:this.onResize,getNextPossiblePosition:this.getNextPossiblePosition,getFirstPossiblePosition:this.getFirstPossiblePosition,getLastPossiblePosition:this.getLastPossiblePosition,getItemComponent:t=>this.getItemComponent(t)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout()}}const se={class:"gridster-preview",ref:"root"};function re(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)("div",se,null,512)}class ne{constructor(t,e,i,s){jt(this,"previewStyle$",void 0),jt(this,"gridRenderer",void 0),jt(this,"renderer",void 0),jt(this,"el",void 0),jt(this,"sub",void 0),this.gridRenderer=e,this.previewStyle$=t,this.renderer=i,this.el=s}init(){this.sub=this.previewStyle$.subscribe((t=>this.previewStyle(t)))}destroy(){this.sub&&this.sub.unsubscribe()}previewStyle(t){t?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,t,this.renderer)):this.renderer.setStyle(this.el,"display","")}}var oe={setup(t){let e;const s=(0,i.ref)();return(0,i.onMounted)((()=>{e=new ne(t.previewStyle,t.renderer,t.render,s.value),e.init()})),(0,i.onUnmounted)((()=>{e.destroy()})),{root:s}},props:{previewStyle:{type:Object,required:!0},renderer:{type:Object,required:!0},render:{type:Object,required:!0}}},ae=s(7559);const le=(0,ae.A)(oe,[["render",re]]);var he=le,ce={setup(t){const e=(0,i.ref)(),s=(0,i.reactive)({gridsterComponent:null,ready:!1});s.gridsterComponent=new ie(new Gt,e.value),(0,i.onMounted)((()=>{s.gridsterComponent.el=e.value,s.gridsterComponent.calculateLayout$=new et,s.gridsterComponent.resize$=new et,s.gridsterComponent.destroy$=new et,s.gridsterComponent.options=Object.assign({},t.options),s.gridsterComponent?.onChanges(s.gridsterComponent.options),t.options?.initCallback&&t.options?.initCallback(s.gridsterComponent),s.gridsterComponent.calculateLayout$.pipe(gt(0),Dt(s.gridsterComponent.destroy$)).subscribe((()=>s.gridsterComponent.calculateLayout())),s.gridsterComponent.resize$.pipe(Ft((()=>Wt(100))),Dt(s.gridsterComponent.destroy$)).subscribe((()=>s.gridsterComponent.resize())),s.ready=!0})),(0,i.onUnmounted)((()=>{s.gridsterComponent.destroy$.next(),s.gridsterComponent.previewStyle$.complete(),s.gridsterComponent.windowResize&&s.gridsterComponent.windowResize(),s.gridsterComponent.options&&s.gridsterComponent.options.destroyCallback&&s.gridsterComponent.options.destroyCallback(s.gridsterComponent),s.gridsterComponent.options&&s.gridsterComponent.options.api&&(s.gridsterComponent.options.api.resize=void 0,s.gridsterComponent.options.api.optionsChanged=void 0,s.gridsterComponent.options.api.getNextPossiblePosition=void 0,s.gridsterComponent.options.api=void 0),s.gridsterComponent.emptyCell.destroy(),s.gridsterComponent.emptyCell=null,s.gridsterComponent.compact.destroy(),s.gridsterComponent.compact=null,s.gridsterComponent.calculateLayout$=null,s.gridsterComponent.resize$=null,s.gridsterComponent.destroy$=null,s.gridsterComponent.options=null})),(0,i.watch)(t.options,(()=>{s.gridsterComponent.options=Object.assign({},t.options),s.gridsterComponent.onChanges(s.gridsterComponent.options)}));const r=t=>s.gridsterComponent.gridRenderer.getGridColumnStyle(t),n=t=>s.gridsterComponent.gridRenderer.getGridRowStyle(t);return{dataReactive:s,root:e,getGridColumnStyle:r,getGridRowStyle:n}},props:{options:{type:Object,require:!0}},components:{GridPreview:he}};const de=(0,ae.A)(ce,[["render",l]]);var pe=de;function ue(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"gridster-item",ref:"root",style:(0,i.normalizeStyle)({zIndex:r.zIndexComputed})},[(0,i.renderSlot)(t.$slots,"default"),r.comp.component.resize.resizableHandles?.s&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,onMousedown:e[0]||(e[0]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[1]||(e[1]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-s"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.e&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:1,onMousedown:e[2]||(e[2]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[3]||(e[3]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-e"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.n&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:2,onMousedown:e[4]||(e[4]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[5]||(e[5]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-n"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.w&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:3,onMousedown:e[6]||(e[6]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[7]||(e[7]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-w"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.se&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:4,onMousedown:e[8]||(e[8]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[9]||(e[9]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-se"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.ne&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:5,onMousedown:e[10]||(e[10]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[11]||(e[11]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-ne"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.sw&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:6,onMousedown:e[12]||(e[12]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[13]||(e[13]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-sw"},null,32)):(0,i.createCommentVNode)("",!0),r.comp.component.resize.resizableHandles?.nw&&r.comp.component.resize.resizeEnabled?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:7,onMousedown:e[14]||(e[14]=t=>r.comp.component.resize.dragStartDelay(t)),onTouchstart:e[15]||(e[15]=t=>r.comp.component.resize.dragStartDelay(t)),class:"gridster-item-resizable-handler handle-nw"},null,32)):(0,i.createCommentVNode)("",!0)],4)}class me{constructor(t){jt(this,"fromSouth",void 0),jt(this,"fromNorth",void 0),jt(this,"fromEast",void 0),jt(this,"fromWest",void 0),jt(this,"pushedItems",void 0),jt(this,"pushedItemsTemp",void 0),jt(this,"pushedItemsTempPath",void 0),jt(this,"pushedItemsPath",void 0),jt(this,"gridsterItem",void 0),jt(this,"gridster",void 0),jt(this,"pushedItemsOrder",void 0),jt(this,"tryPattern",void 0),jt(this,"iteration",0),this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(t,e){if(this.gridster.$options.pushItems&&!e){this.pushedItemsOrder=[],this.iteration=0;const e=this.push(this.gridsterItem,t);return e||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],e}return!1}restoreTempItems(){let t=this.pushedItemsTemp.length-1;for(;t>-1;t--)this.removeFromTempPushed(this.pushedItemsTemp[t])}restoreItems(){let t=0;const e=this.pushedItems.length;let i;for(;t<e;t++)i=this.pushedItems[t],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let t=0;const e=this.pushedItems.length;let i;for(;t<e;t++)i=this.pushedItems[t],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let t=this.pushedItems.length-1,e=!1;for(;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}push(t,e){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(t.$item))return!1;if(""===e)return!1;const i=this.gridster.findItemsWithItem(t.$item),s=e===this.fromNorth||e===this.fromWest;i.sort(((t,e)=>s?e.$item.y-t.$item.y||e.$item.x-t.$item.x:t.$item.y-e.$item.y||t.$item.x-e.$item.x));let r,n=0,o=!0;const a=[];for(;n<i.length;n++){if(r=i[n],r===this.gridsterItem)continue;if(!r.canBeDragged()){o=!1;break}const s=this.pushedItemsTemp.indexOf(r);if(s>-1&&this.pushedItemsTempPath[s].length>10){o=!1;break}if(this.tryPattern[e][0].call(this,r,t))this.pushedItemsOrder.push(r),a.push(r);else if(this.tryPattern[e][1].call(this,r,t))this.pushedItemsOrder.push(r),a.push(r);else if(this.tryPattern[e][2].call(this,r,t))this.pushedItemsOrder.push(r),a.push(r);else{if(!this.tryPattern[e][3].call(this,r,t)){o=!1;break}this.pushedItemsOrder.push(r),a.push(r)}}if(!o&&(n=this.pushedItemsOrder.lastIndexOf(a[0]),n>-1)){let t=this.pushedItemsOrder.length-1;for(;t>=n;t--)r=this.pushedItemsOrder[t],this.pushedItemsOrder.pop(),this.removeFromTempPushed(r),this.removeFromPushedItem(r)}return this.iteration++,o}trySouth(t,e){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(t),t.$item.y=e.$item.y+e.$item.rows,this.push(t,this.fromNorth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}tryNorth(t,e){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(t),t.$item.y=e.$item.y-t.$item.rows,this.push(t,this.fromSouth)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}tryEast(t,e){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(t),t.$item.x=e.$item.x+e.$item.cols,this.push(t,this.fromWest)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}tryWest(t,e){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(t),t.$item.x=e.$item.x-t.$item.cols,this.push(t,this.fromEast)?(t.setSize(),this.addToPushed(t),!0):(this.removeFromTempPushed(t),!1))}addToTempPushed(t){let e=this.pushedItemsTemp.indexOf(t);-1===e&&(e=this.pushedItemsTemp.push(t)-1,this.pushedItemsTempPath[e]=[]),this.pushedItemsTempPath[e].push({x:t.$item.x,y:t.$item.y})}removeFromTempPushed(t){const e=this.pushedItemsTemp.indexOf(t),i=this.pushedItemsTempPath[e].pop();i&&(t.$item.x=i.x,t.$item.y=i.y,t.setSize(),this.pushedItemsTempPath[e].length||(this.pushedItemsTemp.splice(e,1),this.pushedItemsTempPath.splice(e,1)))}addToPushed(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0},{x:t.$item.x,y:t.$item.y}]);else{const e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y})}}removeFromPushed(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}removeFromPushedItem(t){const e=this.pushedItems.indexOf(t);e>-1&&(this.pushedItemsPath[e].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(e,1),this.pushedItemsPath.splice(e,1)))}checkPushedItem(t,e){const i=this.pushedItemsPath[e];let s,r,n,o=i.length-2,a=!1;for(;o>-1;o--)s=i[o],r=t.$item.x,n=t.$item.y,t.$item.x=s.x,t.$item.y=s.y,this.gridster.findItemWithItem(t.$item)?(t.$item.x=r,t.$item.y=n):(t.setSize(),i.splice(o+1,i.length-o-1),a=!0);return i.length<2&&this.removeFromPushed(e),a}}let ge,fe;const ve=50;let ye,we,be,xe,Ce,Ie,Ee;function $e(t,e,i,s,r,n,o,a,l,h){ge=t.$options.scrollSensitivity,fe=t.$options.scrollSpeed,ye=t.el,we=l,be=h;const c=ye.offsetWidth,d=ye.offsetHeight,p=ye.scrollLeft,u=ye.scrollTop,m=i-u,g=d+u-i-r,{clientX:f,clientY:v}=n;if(!t.$options.disableScrollVertical)if(o.clientY<v&&g<ge){if(Re(),we&&be&&!be.south||Ee)return;Ee=ke(1,a,o)}else if(o.clientY>v&&u>0&&m<ge){if(Be(),we&&be&&!be.north||Ie)return;Ie=ke(-1,a,o)}else o.clientY!==v&&Pe();const y=p+c-e-s,w=e-p;if(!t.$options.disableScrollHorizontal)if(o.clientX<f&&y<=ge){if(Le(),we&&be&&!be.east||xe)return;xe=Se(1,a,o)}else if(o.clientX>f&&p>0&&w<ge){if(ze(),we&&be&&!be.west||Ce)return;Ce=Se(-1,a,o)}else o.clientX!==f&&Me()}function ke(t,e,i){let s=i.clientY;return window.setInterval((()=>{(!ye||-1===t&&ye.scrollTop-fe<0)&&Pe(),ye.scrollTop+=t*fe,s+=t*fe,e({clientX:i.clientX,clientY:s})}),ve)}function Se(t,e,i){let s=i.clientX;return window.setInterval((()=>{(!ye||-1===t&&ye.scrollLeft-fe<0)&&Me(),ye.scrollLeft+=t*fe,s+=t*fe,e({clientX:s,clientY:i.clientY})}),ve)}function Te(){Me(),Pe(),ye=null}function Me(){ze(),Le()}function Pe(){Re(),Be()}function ze(){xe&&(clearInterval(xe),xe=0)}function Le(){Ce&&(clearInterval(Ce),Ce=0)}function Be(){Ee&&(clearInterval(Ee),Ee=0)}function Re(){Ie&&(clearInterval(Ie),Ie=0)}class Ve{constructor(t){jt(this,"swapedItem",void 0),jt(this,"gridsterItem",void 0),jt(this,"gridster",void 0),this.gridsterItem=t,this.gridster=t.gridster}destroy(){this.gridster=this.gridsterItem=this.swapedItem=null}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const t=this.swapedItem.$item.x,e=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=t,this.swapedItem.$item.y=e):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(t){let e;if(e=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(t.$item):this.gridster.checkCollision(t.$item),e&&!0!==e&&e.canBeDragged()){const i=e,s=i.$item.x,r=i.$item.y,n=t.$item.x,o=t.$item.y,a=n-s,l=o-r;i.$item.x=t.item.x-a,i.$item.y=t.item.y-l,t.$item.x=i.item.x+a,t.$item.y=i.item.y+l,this.gridster.checkCollision(i.$item)||this.gridster.checkCollision(t.$item)?(t.$item.x=n,t.$item.y=o,i.$item.x=s,i.$item.y=r):(i.setSize(),this.swapedItem=i,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}const Ne="gridster-item-resizable-handler";var Ae;(function(t){t["UP"]="UP",t["DOWN"]="DOWN",t["LEFT"]="LEFT",t["RIGHT"]="RIGHT"})(Ae||(Ae={}));class De{constructor(t,e,i){jt(this,"zone",void 0),jt(this,"gridsterItem",void 0),jt(this,"gridster",void 0),jt(this,"lastMouse",void 0),jt(this,"offsetLeft",void 0),jt(this,"offsetTop",void 0),jt(this,"margin",void 0),jt(this,"outerMarginTop",void 0),jt(this,"outerMarginRight",void 0),jt(this,"outerMarginBottom",void 0),jt(this,"outerMarginLeft",void 0),jt(this,"diffTop",void 0),jt(this,"diffLeft",void 0),jt(this,"originalClientX",void 0),jt(this,"originalClientY",void 0),jt(this,"top",void 0),jt(this,"left",void 0),jt(this,"height",void 0),jt(this,"width",void 0),jt(this,"positionX",void 0),jt(this,"positionY",void 0),jt(this,"positionXBackup",void 0),jt(this,"positionYBackup",void 0),jt(this,"enabled",void 0),jt(this,"mousemove",void 0),jt(this,"mouseup",void 0),jt(this,"mouseleave",void 0),jt(this,"cancelOnBlur",void 0),jt(this,"touchmove",void 0),jt(this,"touchend",void 0),jt(this,"touchcancel",void 0),jt(this,"mousedown",void 0),jt(this,"touchstart",void 0),jt(this,"push",void 0),jt(this,"swap",void 0),jt(this,"path",void 0),jt(this,"collision",!1),jt(this,"dragMove",(t=>{t.stopPropagation(),t.preventDefault(),Qt.checkTouchEvent(t);let e=this.getDirections(t);this.gridster.options.enableBoundaryControl&&(e.includes(Ae.UP)&&this.gridsterItem.el.getBoundingClientRect().top<this.gridster.el.getBoundingClientRect().top+(this.outerMarginTop??this.margin)&&(e=e.filter((t=>t!=Ae.UP)),t=new MouseEvent(t.type,{clientX:t.clientX,clientY:this.lastMouse.clientY})),e.includes(Ae.LEFT)&&this.gridsterItem.el.getBoundingClientRect().left<this.gridster.el.getBoundingClientRect().left+(this.outerMarginLeft??this.margin)&&(e=e.filter((t=>t!=Ae.LEFT)),t=new MouseEvent(t.type,{clientX:this.lastMouse.clientX,clientY:t.clientY})),e.includes(Ae.RIGHT)&&this.gridsterItem.el.getBoundingClientRect().right>this.gridster.el.getBoundingClientRect().right-(this.outerMarginRight??this.margin)&&(e=e.filter((t=>t!=Ae.RIGHT)),t=new MouseEvent(t.type,{clientX:this.lastMouse.clientX,clientY:t.clientY})),e.includes(Ae.DOWN)&&this.gridsterItem.el.getBoundingClientRect().bottom>this.gridster.el.getBoundingClientRect().bottom-(this.outerMarginBottom??this.margin)&&(e=e.filter((t=>t!=Ae.DOWN)),t=new MouseEvent(t.type,{clientX:t.clientX,clientY:this.lastMouse.clientY}))),e.length&&(this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,$e(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.calculateItemPositionFromMousePosition),this.calculateItemPositionFromMousePosition(t))})),jt(this,"calculateItemPositionFromMousePosition",(t=>{this.gridster.options.scale?this.calculateItemPositionWithScale(t,this.gridster.options.scale):this.calculateItemPositionWithoutScale(t),this.calculateItemPosition(),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run((()=>{this.gridster.updateGrid()}))})),jt(this,"dragStop",(t=>{t.stopPropagation(),t.preventDefault(),Te(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeDrag,this.cancelDrag):this.makeDrag(),setTimeout((()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))}))})),jt(this,"cancelDrag",(()=>{this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)})),jt(this,"makeDrag",(()=>{this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),this.push=null),this.swap&&(this.swap.destroy(),this.swap=null)})),jt(this,"dragStartDelay",(t=>{const e=t.target;if(e.classList.contains(Ne))return;if(Qt.checkContentClassForEvent(this.gridster,t))return;if(Qt.checkTouchEvent(t),!this.gridster.$options.draggable.delayStart)return void this.dragStart(t);const i=setTimeout((()=>{this.dragStart(t),c()}),this.gridster.$options.draggable.delayStart),s=this.gridsterItem.renderer.listen("document","mouseup",c),r=this.gridsterItem.renderer.listen("document","mouseleave",c),n=this.gridsterItem.renderer.listen("window","blur",c),o=this.gridsterItem.renderer.listen("document","touchmove",h),a=this.gridsterItem.renderer.listen("document","touchend",c),l=this.gridsterItem.renderer.listen("document","touchcancel",c);function h(e){Qt.checkTouchEvent(e),(Math.abs(e.clientX-t.clientX)>9||Math.abs(e.clientY-t.clientY)>9)&&c()}function c(){clearTimeout(i),n(),s(),r(),o(),a(),l()}})),this.zone=i,this.gridsterItem=t,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.movingItem=null,this.gridster.previewStyle&&this.gridster.previewStyle(!0),this.gridsterItem=this.gridster=this.collision=null,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(t){t.which&&1!==t.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular((()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)})),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.gridster.$options.dirType===$t.RTL?this.diffLeft=t.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:this.diffLeft=t.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=t.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new me(this.gridsterItem),this.swap=new Ve(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}calculateItemPositionWithScale(t,e){this.gridster.$options.dirType===$t.RTL?this.left=this.gridster.el.scrollWidth-this.originalClientX+(t.clientX-this.originalClientX)/e+this.diffLeft:this.left=this.originalClientX+(t.clientX-this.originalClientX)/e+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(t.clientY-this.originalClientY)/e+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(t){this.gridster.$options.dirType===$t.RTL?this.left=this.gridster.el.scrollWidth-t.clientX+this.diffLeft:this.left=t.clientX+this.offsetLeft-this.diffLeft,this.top=t.clientY+this.offsetTop-this.diffTop}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const t=this.path[this.path.length-1];let e="";t.x<this.gridsterItem.$item.x?e=this.push.fromWest:t.x>this.gridsterItem.$item.x?e=this.push.fromEast:t.y<this.gridsterItem.$item.y?e=this.push.fromNorth:t.y>this.gridsterItem.$item.y&&(e=this.push.fromSouth),this.push.pushItems(e,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}else this.collision=!1;this.gridster.previewStyle(!0)}toggle(){const t=this.gridsterItem.canBeDragged();!this.enabled&&t?(this.enabled=!this.enabled,this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartDelay),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartDelay)):this.enabled&&!t&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}getDirections(t){const e=[];return 0===this.lastMouse.clientX&&0===this.lastMouse.clientY&&(this.lastMouse.clientY=t.clientY,this.lastMouse.clientX=t.clientX),this.lastMouse.clientY>t.clientY&&e.push(Ae.UP),this.lastMouse.clientY<t.clientY&&e.push(Ae.DOWN),this.lastMouse.clientX<t.clientX&&e.push(Ae.RIGHT),this.lastMouse.clientX>t.clientX&&e.push(Ae.LEFT),e}}class Fe{constructor(t){jt(this,"fromSouth",void 0),jt(this,"fromNorth",void 0),jt(this,"fromEast",void 0),jt(this,"fromWest",void 0),jt(this,"pushedItems",void 0),jt(this,"pushedItemsPath",void 0),jt(this,"gridsterItem",void 0),jt(this,"gridster",void 0),jt(this,"tryPattern",void 0),this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=t,this.gridster=t.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){this.gridster=this.gridsterItem=null}pushItems(t){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,t)}restoreItems(){let t=0;const e=this.pushedItems.length;let i;for(;t<e;t++)i=this.pushedItems[t],i.$item.x=i.item.x||0,i.$item.y=i.item.y||0,i.$item.cols=i.item.cols||1,i.$item.row=i.item.row||1,i.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let t=0;const e=this.pushedItems.length;let i;for(;t<e;t++)i=this.pushedItems[t],i.checkItemChanges(i.$item,i.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let t=this.pushedItems.length-1,e=!1;for(;t>-1;t--)this.checkPushedItem(this.pushedItems[t],t)&&(e=!0);e&&this.checkPushBack()}push(t,e){const i=this.gridster.checkCollision(t.$item);if(i&&!0!==i&&i!==this.gridsterItem&&i.canBeResized()){if(this.tryPattern[e].call(this,i,t,e))return!0}else if(!1===i)return!0;return!1}trySouth(t,e,i){const s=t.$item.y,r=t.$item.rows;return t.$item.y=e.$item.y+e.$item.rows,t.$item.rows=r+s-t.$item.y,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.y=s,t.$item.rows=r,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}tryNorth(t,e,i){const s=t.$item.rows;return t.$item.rows=e.$item.y-t.$item.y,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.rows=s,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}tryEast(t,e,i){const s=t.$item.x,r=t.$item.cols;return t.$item.x=e.$item.x+e.$item.cols,t.$item.cols=r+s-t.$item.x,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.x=s,t.$item.cols=r,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}tryWest(t,e,i){const s=t.$item.cols;return t.$item.cols=e.$item.x-t.$item.x,this.gridster.checkCollisionTwoItems(t.$item,e.$item)||this.gridster.checkGridCollision(t.$item)?(t.$item.cols=s,!1):(t.setSize(),this.addToPushed(t),this.push(e,i),!0)}addToPushed(t){if(this.pushedItems.indexOf(t)<0)this.pushedItems.push(t),this.pushedItemsPath.push([{x:t.item.x||0,y:t.item.y||0,cols:t.item.cols||0,rows:t.item.rows||0},{x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows}]);else{const e=this.pushedItems.indexOf(t);this.pushedItemsPath[e].push({x:t.$item.x,y:t.$item.y,cols:t.$item.cols,rows:t.$item.rows})}}removeFromPushed(t){t>-1&&(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1))}checkPushedItem(t,e){const i=this.pushedItemsPath[e];let s,r,n,o,a,l=i.length-2;for(;l>-1;l--)s=i[l],r=t.$item.x,n=t.$item.y,o=t.$item.cols,a=t.$item.rows,t.$item.x=s.x,t.$item.y=s.y,t.$item.cols=s.cols,t.$item.rows=s.rows,this.gridster.findItemWithItem(t.$item)?(t.$item.x=r,t.$item.y=n,t.$item.cols=o,t.$item.rows=a):(t.setSize(),i.splice(l+1,i.length-1-l));return i.length<2&&(this.removeFromPushed(e),!0)}}class Oe{constructor(t,e,i){jt(this,"zone",void 0),jt(this,"gridsterItem",void 0),jt(this,"gridster",void 0),jt(this,"lastMouse",void 0),jt(this,"itemBackup",void 0),jt(this,"resizeEventScrollType",void 0),jt(this,"directionFunction",null),jt(this,"resizeEnabled",void 0),jt(this,"resizableHandles",void 0),jt(this,"mousemove",void 0),jt(this,"mouseup",void 0),jt(this,"mouseleave",void 0),jt(this,"cancelOnBlur",void 0),jt(this,"touchmove",void 0),jt(this,"touchend",void 0),jt(this,"touchcancel",void 0),jt(this,"push",void 0),jt(this,"pushResize",void 0),jt(this,"minHeight",void 0),jt(this,"minWidth",void 0),jt(this,"offsetTop",void 0),jt(this,"offsetLeft",void 0),jt(this,"diffTop",void 0),jt(this,"diffLeft",void 0),jt(this,"diffRight",void 0),jt(this,"diffBottom",void 0),jt(this,"margin",void 0),jt(this,"outerMarginTop",void 0),jt(this,"outerMarginRight",void 0),jt(this,"outerMarginBottom",void 0),jt(this,"outerMarginLeft",void 0),jt(this,"originalClientX",void 0),jt(this,"originalClientY",void 0),jt(this,"top",void 0),jt(this,"left",void 0),jt(this,"bottom",void 0),jt(this,"right",void 0),jt(this,"width",void 0),jt(this,"height",void 0),jt(this,"newPosition",void 0),jt(this,"dragMove",(t=>{if(null===this.directionFunction)throw new Error("The `directionFunction` has not been set before calling `dragMove`.");t.stopPropagation(),t.preventDefault(),Qt.checkTouchEvent(t),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,$e(this.gridster,this.left,this.top,this.width,this.height,t,this.lastMouse,this.directionFunction,!0,this.resizeEventScrollType);const e=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(t.clientX-this.originalClientX)/e,clientY:this.originalClientY+(t.clientY-this.originalClientY)/e}),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.zone.run((()=>{this.gridster.updateGrid()}))})),jt(this,"dragStop",(t=>{t.stopPropagation(),t.preventDefault(),Te(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,t)).then(this.makeResize,this.cancelResize):this.makeResize(),setTimeout((()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}))})),jt(this,"cancelResize",(()=>{this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null})),jt(this,"makeResize",(()=>{this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),this.push=null,this.pushResize.destroy(),this.pushResize=null})),jt(this,"handleNorth",(t=>{this.top=t.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height?(this.height=this.minHeight,this.top=this.bottom-this.minHeight):this.gridster.options.enableBoundaryControl&&(this.top=Math.max(0,this.top),this.height=this.bottom-this.top);const e=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionY(this.top+e,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.top=this.gridster.positionYToPixels(this.gridsterItem.$item.y),this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)})),jt(this,"handleWest",(t=>{const e=this.gridster.$options.dirType===$t.RTL?this.originalClientX+(this.originalClientX-t.clientX):t.clientX;this.left=e+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width?(this.width=this.minWidth,this.left=this.right-this.minWidth):this.gridster.options.enableBoundaryControl&&(this.left=Math.max(0,this.left),this.width=this.right-this.left);const i=this.gridster.options.pushItems?this.margin:0;if(this.newPosition=this.gridster.pixelsToPositionX(this.left+i,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.left=this.gridster.positionXToPixels(this.gridsterItem.$item.x),this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)})),jt(this,"handleSouth",(t=>{if(this.height=t.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.gridster.options.enableBoundaryControl){const t=this.outerMarginBottom??this.margin,e=this.gridster.el.getBoundingClientRect();this.bottom=Math.min(this.bottom,e.bottom-e.top-2*t),this.height=this.bottom-this.top}const e=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionY(this.bottom+e,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)})),jt(this,"handleEast",(t=>{const e=this.gridster.$options.dirType===$t.RTL?this.originalClientX+(this.originalClientX-t.clientX):t.clientX;if(this.width=e+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.gridster.options.enableBoundaryControl){const t=this.outerMarginRight??this.margin,e=this.gridster.el.getBoundingClientRect();this.right=Math.min(this.right,e.right-e.left-2*t),this.width=this.right-this.left}const i=this.gridster.options.pushItems?0:this.margin;if(this.newPosition=this.gridster.pixelsToPositionX(this.right+i,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)})),jt(this,"handleNorthWest",(t=>{this.handleNorth(t),this.handleWest(t)})),jt(this,"handleNorthEast",(t=>{this.handleNorth(t),this.handleEast(t)})),jt(this,"handleSouthWest",(t=>{this.handleSouth(t),this.handleWest(t)})),jt(this,"handleSouthEast",(t=>{this.handleSouth(t),this.handleEast(t)})),this.zone=i,this.gridsterItem=t,this.gridster=e,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={west:!1,east:!1,north:!1,south:!1}}destroy(){this.gridster?.previewStyle(),this.gridster=this.gridsterItem=null}dragStart(t){if(t.which&&1!==t.which)return;this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,t),t.stopPropagation(),t.preventDefault(),this.zone.runOutsideAngular((()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragMove),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragMove)})),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStop),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStop),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStop),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStop),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStop),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=t.clientX,this.lastMouse.clientY=t.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=t.clientX,this.originalClientY=t.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.outerMarginTop=this.gridster.$options.outerMarginTop,this.outerMarginRight=this.gridster.$options.outerMarginRight,this.outerMarginBottom=this.gridster.$options.outerMarginBottom,this.outerMarginLeft=this.gridster.$options.outerMarginLeft,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=t.clientX+this.offsetLeft-this.left,this.diffRight=t.clientX+this.offsetLeft-this.right,this.diffTop=t.clientY+this.offsetTop-this.top,this.diffBottom=t.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new me(this.gridsterItem),this.pushResize=new Fe(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid();const{classList:e}=t.target;e.contains("handle-n")?(this.resizeEventScrollType.north=!0,this.directionFunction=this.handleNorth):e.contains("handle-w")?this.gridster.$options.dirType===$t.RTL?(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):e.contains("handle-s")?(this.resizeEventScrollType.south=!0,this.directionFunction=this.handleSouth):e.contains("handle-e")?this.gridster.$options.dirType===$t.RTL?(this.resizeEventScrollType.west=!0,this.directionFunction=this.handleWest):(this.resizeEventScrollType.east=!0,this.directionFunction=this.handleEast):e.contains("handle-nw")?this.gridster.$options.dirType===$t.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):e.contains("handle-ne")?this.gridster.$options.dirType===$t.RTL?(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleNorthWest):(this.resizeEventScrollType.north=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleNorthEast):e.contains("handle-sw")?this.gridster.$options.dirType===$t.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):e.contains("handle-se")&&(this.gridster.$options.dirType===$t.RTL?(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.west=!0,this.directionFunction=this.handleSouthWest):(this.resizeEventScrollType.south=!0,this.resizeEventScrollType.east=!0,this.directionFunction=this.handleSouthEast))}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized(),this.resizableHandles=this.gridsterItem.getResizableHandles()}dragStartDelay(t){if(Qt.checkTouchEvent(t),!this.gridster.$options.resizable.delayStart)return void this.dragStart(t);const e=setTimeout((()=>{this.dragStart(t),h()}),this.gridster.$options.resizable.delayStart),{cancelMouse:i,cancelMouseLeave:s,cancelOnBlur:r,cancelTouchMove:n,cancelTouchEnd:o,cancelTouchCancel:a}=this.zone.runOutsideAngular((()=>{const t=this.gridsterItem.renderer.listen("document","mouseup",h),e=this.gridsterItem.renderer.listen("document","mouseleave",h),i=this.gridsterItem.renderer.listen("window","blur",h),s=this.gridsterItem.renderer.listen("document","touchmove",l),r=this.gridsterItem.renderer.listen("document","touchend",h),n=this.gridsterItem.renderer.listen("document","touchcancel",h);return{cancelMouse:t,cancelMouseLeave:e,cancelOnBlur:i,cancelTouchMove:s,cancelTouchEnd:r,cancelTouchCancel:n}}));function l(e){Qt.checkTouchEvent(e),(Math.abs(e.clientX-t.clientX)>9||Math.abs(e.clientY-t.clientY)>9)&&h()}function h(){clearTimeout(e),r(),i(),s(),n(),o(),a()}}setItemTop(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,t)}setItemLeft(t){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,t,this.top)}setItemHeight(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",t+"px")}setItemWidth(t){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",t+"px")}}class He{constructor(t,e,i){jt(this,"item",void 0),jt(this,"$item",void 0),jt(this,"top",void 0),jt(this,"left",void 0),jt(this,"width",void 0),jt(this,"height",void 0),jt(this,"drag",void 0),jt(this,"resize",void 0),jt(this,"notPlaced",void 0),jt(this,"el",void 0),jt(this,"gridster",void 0),jt(this,"renderer",void 0),jt(this,"zone",void 0),jt(this,"init",void 0),this.el=e,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.zone=i,this.gridster=t,this.drag=new De(this,t,this.zone),this.resize=new Oe(this,t,this.zone),this.renderer=t.renderer}updateOptions(){this.$item=Qt.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0,resizableHandles:{s:void 0,e:void 0,n:void 0,w:void 0,se:void 0,ne:void 0,sw:void 0,nw:void 0}})}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const t=this.$item.y*this.gridster.curRowHeight,e=this.$item.x*this.gridster.curColWidth,i=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,s=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=t,this.left=e,!this.init&&i>0&&s>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),i===this.width&&s===this.height||(this.width=i,this.height=s,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this)}checkItemChanges(t,e){t.rows===e.rows&&t.cols===e.cols&&t.x===e.x&&t.y===e.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=e.x||0,this.$item.y=e.y||0,this.$item.cols=e.cols||1,this.$item.rows=e.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayout$.next(),this.itemChanged()))}canBeDragged(){const t=this.gridster.$options.draggable.enabled,e=void 0===this.$item.dragEnabled?t:this.$item.dragEnabled;return!this.gridster.mobile&&t&&e}canBeResized(){const t=this.gridster.$options.resizable.enabled,e=void 0===this.$item.resizeEnabled?t:this.$item.resizeEnabled;return!this.gridster.mobile&&t&&e}getResizableHandles(){const t=this.gridster.$options.resizable.handles,e=this.$item.resizableHandles;return void 0===e?t:{...t,...e}}bringToFront(t){if(t&&t<=0)return;const e=this.getLayerIndex(),i=this.gridster.$options.maxLayerIndex;if(e<i){const s=t?e+t:i;this.item.layerIndex=this.$item.layerIndex=s>i?i:s}}sendToBack(t){if(t&&t<=0)return;const e=this.getLayerIndex();if(e>0){const i=t?e-t:0;this.item.layerIndex=this.$item.layerIndex=i<0?0:i}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}var We={props:{gridster:{type:Object,require:!0},item:{type:Object},event:{type:Object}},setup(t){const e=(0,i.ref)(),s=(0,i.reactive)({component:new He(t.gridster,e.value,t.gridster.zone),sub:null});s.component.item=Object.assign({},(0,i.toRaw)(t.item)),s.component.updateOptions(),(0,i.onMounted)((()=>{s.component.el=e.value,t.gridster?.addItem(s.component),s.sub=t.event?.subscribe((()=>{s.component.item=Object.assign({},(0,i.toRaw)(t.item)),s.component.updateOptions(),s.component.setSize()}))})),(0,i.watch)(s.component.item,((e,i)=>{e&&(s.component.updateOptions(),s.component.init||(t.item.cols=s.component.$item.cols,t.item.rows=s.component.$item.rows,t.item.x=s.component.$item.x,t.item.y=s.component.$item.y,s.component.gridster.calculateLayout$.next())),e&&i&&s.component.setSize()})),(0,i.onUnmounted)((()=>{s.sub?.unsubscribe(),s.sub=null,s.component.gridster.removeItem(s.component),s.component.drag.destroy(),s.component.resize.destroy(),s.component.gridster=s.component.drag=s.component.resize=null}));const r=(0,i.computed)((()=>s.component.getLayerIndex()+s.component.gridster.$options.baseLayerIndex));return{root:e,zIndexComputed:r,comp:s}}};const _e=(0,ae.A)(We,[["render",ue]]);var Ye=_e;const Xe=t=>((0,i.pushScopeId)("data-v-2c139a84"),t=t(),(0,i.popScopeId)(),t),je={class:"wg-toolbar"},Ue=Xe((()=>(0,i.createElementVNode)("h3",{class:"wg-toolbar-t"},"Pilih Widget",-1))),Ge={class:"wg-toolbar-r"},qe={style:{display:"flex","align-items":"center"}},Ze=Xe((()=>(0,i.createElementVNode)("span",{class:"wg-icon"},[(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor"},[(0,i.createElementVNode)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,i.createElementVNode)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})])],-1))),Ke=Xe((()=>(0,i.createElementVNode)("span",{class:"wg-btn-icon"},[(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",fill:"currentColor",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})])],-1))),Je=[Ke],Qe={class:"wg-widgets"},ti={class:"wg-tabbar"},ei={class:"wg-tabbar-l"},ii=Xe((()=>(0,i.createElementVNode)("div",{class:"wg-tabbar-icon"},[(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h240v-560H200v560Zm320 0h240v-280H520v280Zm0-360h240v-200H520v200Z"})])],-1))),si={key:0,class:"wg-tabbar-r"},ri=Xe((()=>(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"})],-1))),ni=Xe((()=>(0,i.createElementVNode)("span",{class:"line"},null,-1))),oi=Xe((()=>(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",fill:"currentColor",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})],-1))),ai=Xe((()=>(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"})],-1))),li={key:1,class:"wg-tabbar-r tab-preview"},hi=Xe((()=>(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})],-1))),ci=Xe((()=>(0,i.createElementVNode)("button",{class:"wg-button-wrapper",style:{"margin-left":"18px",padding:"0 10px",height:"36px"}},[(0,i.createElementVNode)("span",{style:{display:"block",width:"24px"}},[(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M120-120v-240h80v104l124-124 56 56-124 124h104v80H120Zm480 0v-80h104L580-324l56-56 124 124v-104h80v240H600ZM324-580 200-704v104h-80v-240h240v80H256l124 124-56 56Zm312 0-56-56 124-124H600v-80h240v240h-80v-104L636-580Z"})])])],-1)));function di(t,e,s,r,n,o){const a=(0,i.resolveComponent)("TableWidgetList");return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["wg-selector",{show:r.dataReactive.showSelector}])},[(0,i.createElementVNode)("div",je,[Ue,(0,i.createElementVNode)("div",Ge,[(0,i.createElementVNode)("div",qe,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["wg-input-wapper",r.dataReactive.classSearchWrapper])},[Ze,(0,i.createElementVNode)("form",{onSubmit:e[3]||(e[3]=(...t)=>r.onSubmit&&r.onSubmit(...t))},[(0,i.withDirectives)((0,i.createElementVNode)("input",{class:"input-text",type:"text",placeholder:"Cari widget",onFocus:e[0]||(e[0]=(...t)=>r.onFocus&&r.onFocus(...t)),onBlur:e[1]||(e[1]=(...t)=>r.onBlur&&r.onBlur(...t)),"onUpdate:modelValue":e[2]||(e[2]=t=>r.dataReactive.searchText=t)},null,544),[[i.vModelText,r.dataReactive.searchText]])],32)],2),(0,i.createElementVNode)("button",{class:"wg-button-wrapper circle",onClick:e[4]||(e[4]=t=>r.dataReactive.showSelector=!1)},Je)])])]),(0,i.createElementVNode)("div",Qe,[(0,i.createVNode)(a,{tableDataModel:r.dataReactive.dataTableListWidget,onSelectItem:r.onItemSelected},null,8,["tableDataModel","onSelectItem"])])],2),(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["wg-tabbar-wrapper",{collapse:r.dataReactive.showSelector}])},[(0,i.createElementVNode)("div",ti,[(0,i.createElementVNode)("div",ei,[ii,e[5]||((0,i.setBlockTracking)(-1),e[5]=(0,i.createElementVNode)("p",{style:{margin:"0"}},[(0,i.createTextVNode)((0,i.toDisplayString)(s.layoutName),1)]),(0,i.setBlockTracking)(1),e[5])]),r.dataReactive.onEdit?((0,i.openBlock)(),(0,i.createElementBlock)("div",si,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper custom",onClick:e[6]||(e[6]=t=>{r.dataReactive.showSelector=!0,r.dataReactive.searchText=""})},[ri,(0,i.createTextVNode)(" Tambah Widget ")]),ni,(0,i.createElementVNode)("ul",null,[(0,i.createElementVNode)("li",null,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper",onClick:e[7]||(e[7]=(...t)=>r.onCancelEdit&&r.onCancelEdit(...t))},[oi,(0,i.createTextVNode)(" Batal ")])]),(0,i.createElementVNode)("li",null,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper custom",onClick:e[8]||(e[8]=(...t)=>r.onSave&&r.onSave(...t))},[ai,(0,i.createTextVNode)(" Simpan ")])])])])):((0,i.openBlock)(),(0,i.createElementBlock)("div",li,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper custom",onClick:e[9]||(e[9]=t=>r.dataReactive.onEdit=!0)},[hi,(0,i.createTextVNode)(" Edit Widget ")]),ci]))])],2),((0,i.openBlock)(),(0,i.createBlock)(i.Teleport,{to:"body"},[(0,i.createVNode)(i.Transition,{name:"modal"},{default:(0,i.withCtx)((()=>[r.dataReactive.selectedItem>-1?((0,i.openBlock)(),(0,i.createBlock)((0,i.resolveDynamicComponent)(r.components[r.dataReactive.selectedItem]),{onCancel:e[10]||(e[10]=t=>{r.dataReactive.selectedItem=-1}),class:"modal-mask",key:r.dataReactive.selectedItem},null,32)):(0,i.createCommentVNode)("",!0)])),_:1})]))],64)}const pi=t=>((0,i.pushScopeId)("data-v-0fe6326a"),t=t(),(0,i.popScopeId)(),t),ui={class:"wg-tb"},mi=["onClick"],gi={key:0,class:"wg-tb-title"},fi={class:"wg-title"},vi={class:"wg-info"},yi={class:"wg-info-wrapper"},wi={class:"wg-tooltip"},bi={class:"wg-tooltips-wrapper"},xi=pi((()=>(0,i.createElementVNode)("div",{class:"triangle"},null,-1)));function Ci(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)("div",ui,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.dr.data,((t,e)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"wg-tb-row",key:e},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(t,((t,e)=>((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(["wg-tb-col",{hidden:t.hidden}]),key:e,onClick:e=>r.onSelectItem(t.ID)},[t.hidden?(0,i.createCommentVNode)("",!0):((0,i.openBlock)(),(0,i.createElementBlock)("div",gi,[(0,i.createElementVNode)("div",fi,(0,i.toDisplayString)(t.title),1),(0,i.createElementVNode)("div",vi,[(0,i.createElementVNode)("div",yi,[(0,i.createElementVNode)("div",wi,[(0,i.createElementVNode)("div",bi,[(0,i.createElementVNode)("p",null,(0,i.toDisplayString)(t.description),1),xi])])])])]))],10,mi)))),128))])))),128))])}var Ii={props:{tableDataModel:{type:Object,required:!0}},setup(t,e){let s=(0,i.reactive)({data:[]});const r={avatarUrl:"",description:"",ID:-1,title:"",hidden:!0};let n=()=>{const e=window.innerWidth;let i=0;if(e>=420&&e<712?i=2:e>=712&&e<960?i=3:e>=960&&(i=4),s.data=[],i>0){let e=0;while(e<t.tableDataModel.data.length){let n=[];for(let s=0;s<i;s++)e<t.tableDataModel.data.length?n.push(t.tableDataModel.data[e]):n.push(r),e++;s.data.push(n)}}};(0,i.onMounted)((()=>{n(),window.addEventListener("resize",n)})),(0,i.onUnmounted)((()=>{window.removeEventListener("resize",n)}));let o=t=>{e.emit("selectItem",t)};return{onSelectItem:o,dr:s}}};const Ei=(0,ae.A)(Ii,[["render",Ci],["__scopeId","data-v-0fe6326a"]]);var $i=Ei,ki="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASuSURBVHgB7ZyLcdNAEIZ/ZSgAKsCpAFNBTAU4FSSpgFABSgWQCqxUkFABogJMBREV4A7E7mnFZDLR6V56nHzfjOMkOsvW77273ds9AYlEIpFIJKYhw0DUO6zoiR+v5TEFB3lU2RUqDEAwAUmwNU7wETU29Oca04nWBQu5p8/3nZ4fQgnqLSAJt6GzfKFfN4iLksS8IyELeOAsoOqiGXaIT7jnsFWeu1rkCRwg8a5JvF+IXzxmTdfyqK7JAWsB6zvqrhm+Yn5jnB90TerarF9mgXqDGjmWTIY8u8CNeXNDyMQvZcxbPs2Y+GDS1EhAmTB+oPHrjoEDifjeZGIxHQNzHI94zGsZ53vptUCxvkccIzU+kBWWuiYmFpjjWMlw0d9EA1kfm/JfHC88Fp6SFR66GvRZ4BbHDfu6Wg36BNzAH/4Wb3g8ocebjJ0hepa/7zB3MpzpD2uoCxWureFKjVv6meu6QAQuUkVf+mnXwU4Bvcc/sjoSLjduvqNVEYNBexK453QYga4Lr+D+hlbiCRzMV5gnnXH/icuLeqgcxIP6hmtcYZ6sug6EF9BjYlBOa40/mB+rrgNDWGAJP4yC+LngtKCqoy/0MWCPiAgu4LERXEDl/vgR1Ur3EBbo7niHef2ohBfQ1xnuCZ3mxhAWeClVCdZIUmeFiBhmEslwD0uU6BEmrIaahde0EHFvOqGospBmQSE6hnRjtpx8J3E619NYYMkzR5uweoVh4aWqe7LGSop6WieZV3regUWu407QDy1gCwv5CQskRSKeJAE9SQJ6skwBORcjSSwu0VBJLXTnZXwYaxIZi4MUBpVP/scz/15yLuzgB421l2WBmlIMLhSi7FprjcFYjoBNIqt3MVblawKKuBQBrRJZImKQBNYyBKzxGZao6vwAIi5BwMK0mvQ5IUSMXcDKdzwTEW/hSNwCNhNHBX9yOPqJYwrIPtpvhHNoC99dRi1S9+KUTh1HwCYy4ELFNfliHB2cw68OZu8ycWhpltusGVrANjK4flrdxIO+KhlzG7/arVmhQ7MZdmGa4XQzpPhjXHtXwex8txJtmLUfgeFiYepiJu6FiHGqNvJAbeY5e+FcP9EUapYYDt3KeKd16gSs4ApZCl3sN5uXyIRQSEq03W/MH7wcoLu+xEpzbFQBOay6hiNikRXGpsnRdOFUpe/yrVdqHS4yxOo3miZV14FOAaVi1K7Y0WPj8sRsNMf2PvtESphiuJw0SzLtPmHtNYURsJk0ckSIzP6r7gbKA+ikT0B2Q/rGQq9JY0pkj0rfLnWtK6YVUMZBfYjTxLfRIftg+kpKij4XyiQSKbRHM7xFZBjvjjIINXsFFO9fZ8Zrl5s1TIXc54bF68vOFSYehc2Wf943pwt32sXNh5EiByssbxBUmcbcRgLKB9haFE6WMjZWwKRiriTC2MCmeL1ZBClMmhoLqM67I1cli6e7OmG5z89KQHX+JYvosEnSWkD1Ps2tn4zuahEJBxHPagWJcRKQkYkleK3J6DSRxqVrDO8s4P/31y2EzplAi7TeArbIktAWTXE5z3xzq31us4IlDH08E4IJ+JwntwAFpqvAH/wWoIlEIpFIJKbiH39cftU3JzrbAAAAAElFTkSuQmCC";const Si=t=>((0,i.pushScopeId)("data-v-45ba43e8"),t=t(),(0,i.popScopeId)(),t),Ti={class:"wgt-config-list"},Mi=Si((()=>(0,i.createElementVNode)("h4",{class:"title"},[(0,i.createTextVNode)("Banner Foto "),(0,i.createElementVNode)("span",{style:{"font-size":"16px","font-weight":"400"}},"(Opsional)")],-1))),Pi={class:"list-body ava"},zi=Si((()=>(0,i.createElementVNode)("div",{class:"photo-box"},[(0,i.createElementVNode)("img",{height:"100%",src:ki,alt:"empty"})],-1))),Li={class:"photo-options"},Bi=Si((()=>(0,i.createElementVNode)("h5",null,"Pilih atau ubah foto",-1))),Ri={class:"wgt-config-options"},Vi=Si((()=>(0,i.createElementVNode)("span",null,"Pilih Gambar",-1))),Ni=Si((()=>(0,i.createElementVNode)("span",{class:"divider"},null,-1))),Ai=Si((()=>(0,i.createElementVNode)("span",{class:"file-name"},"Hello World.png",-1))),Di=Si((()=>(0,i.createElementVNode)("li",null,[(0,i.createElementVNode)("h4",{class:"title"},"Judul Banner"),(0,i.createElementVNode)("div",{class:"list-body"},[(0,i.createElementVNode)("div",{class:"wgt-config-options"},[(0,i.createElementVNode)("span",null,"Judul"),(0,i.createElementVNode)("span",{class:"divider"}),(0,i.createElementVNode)("input",{type:"text",placeholder:"Masukkan judul banner"})])])],-1))),Fi=Si((()=>(0,i.createElementVNode)("li",null,[(0,i.createElementVNode)("h4",{class:"title"},"Deskripsi Banner"),(0,i.createElementVNode)("div",{class:"list-body"},[(0,i.createElementVNode)("div",{class:"wgt-config-options"},[(0,i.createElementVNode)("span",null,"Deskripsi"),(0,i.createElementVNode)("span",{class:"divider"}),(0,i.createElementVNode)("input",{type:"text",placeholder:"Masukkan deskripsi banner"})])])],-1)));function Oi(t,e,s,r,n,o){const a=(0,i.resolveComponent)("ImageResizerButton"),l=(0,i.resolveComponent)("BaseConfig");return(0,i.openBlock)(),(0,i.createBlock)(l,{onCancel:r.cancel,widgetName:"Hero Banner"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("ul",Ti,[(0,i.createElementVNode)("li",null,[Mi,(0,i.createElementVNode)("div",Pi,[zi,(0,i.createElementVNode)("div",Li,[Bi,(0,i.createElementVNode)("div",Ri,[Vi,Ni,Ai,(0,i.createVNode)(a)])])])]),Di,Fi])])),_:1},8,["onCancel"])}const Hi={class:"wgt-config"},Wi={style:{position:"relative",width:"100%",height:"100%"}},_i={class:"wgt-config-header"},Yi={class:"wgt-config-l"},Xi={class:"wgt-config-r"},ji=(0,i.createElementVNode)("span",{style:{display:"block",height:"24px",width:"24px"}},[(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",fill:"currentColor",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})])],-1),Ui=[ji],Gi={class:"wgt-config-body"},qi={class:"wgt-config-footer"},Zi=(0,i.createElementVNode)("button",{class:"wg-button-wrapper active"}," Tambah ",-1);function Ki(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)("div",Hi,[(0,i.createElementVNode)("div",Wi,[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(["wgt-config-wrapper",{"full-page":s.fullPage}])},[(0,i.createElementVNode)("div",_i,[(0,i.createElementVNode)("div",Yi,[e[0]||((0,i.setBlockTracking)(-1),e[0]=(0,i.createElementVNode)("h2",null,[(0,i.createTextVNode)("Tambah widget: "+(0,i.toDisplayString)(s.widgetName),1)]),(0,i.setBlockTracking)(1),e[0])]),(0,i.createElementVNode)("div",Xi,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper circle",onClick:e[1]||(e[1]=(...t)=>r.cancel&&r.cancel(...t))},Ui)])]),(0,i.createElementVNode)("div",Gi,[(0,i.renderSlot)(t.$slots,"default")]),(0,i.createElementVNode)("div",qi,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper",onClick:e[2]||(e[2]=(...t)=>r.cancel&&r.cancel(...t))}," Batal "),Zi])],2)])])}var Ji={setup(t,e){const i=()=>{e.emit("cancel")};return{cancel:i}},props:{widgetName:{type:String,default:""},fullPage:{type:Boolean,default:!1}}};const Qi=(0,ae.A)(Ji,[["render",Ki]]);var ts=Qi;const es=(0,i.createElementVNode)("label",{for:"chooseFile",class:"cfg-mrt-file-label"},[(0,i.createElementVNode)("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M440-320v-326L336-542l-56-58 200-200 200 200-56 58-104-104v326h-80ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"})])],-1);function is(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)(i.Fragment,null,[(0,i.createElementVNode)("input",{type:"file",id:"chooseFile",name:"media_file",onChange:e[0]||(e[0]=(...t)=>r.onChange&&r.onChange(...t)),accept:"image/*",capture:"camera",class:"cfg-mrt-file"},null,32),es],64)}var ss={setup(){const t=(0,i.ref)(),e=e=>{const i=e.target.files&&e.target.files.length?e.target.files[0]:null;if(i){const e=new FileReader;e.onload=e=>{if(e.target.result){let i=document.createElement("img");i.id="image",i.src=e.target.result,t.value.innerHTML="",t.value.appendChild(i)}},e.readAsDataURL(i)}};return{onChange:e,result:t}}};const rs=(0,ae.A)(ss,[["render",is]]);var ns=rs,os={setup(t,e){const i=()=>{e.emit("cancel")};return{cancel:i}},components:{ImageResizerButton:ns,BaseConfig:ts}};const as=(0,ae.A)(os,[["render",Oi],["__scopeId","data-v-45ba43e8"]]);var ls=as;const hs=t=>((0,i.pushScopeId)("data-v-102d5090"),t=t(),(0,i.popScopeId)(),t),cs={class:"wgt-config-list"},ds=hs((()=>(0,i.createElementVNode)("h4",{class:"title"},"Map Datasource",-1))),ps={class:"wrap-list"};function us(t,e,s,r,n,o){const a=(0,i.resolveComponent)("DropdownSelectorComp"),l=(0,i.resolveComponent)("SortableComp"),h=(0,i.resolveComponent)("BaseConfig");return(0,i.openBlock)(),(0,i.createBlock)(h,{onCancel:r.cancel,widgetName:"Peta Device"},{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("ul",cs,[(0,i.createElementVNode)("li",null,[ds,(0,i.createElementVNode)("div",ps,[(0,i.createVNode)(l,{modelValue:r.data.sortParam,"onUpdate:modelValue":e[0]||(e[0]=t=>r.data.sortParam=t),onDelete:r.onDelete},{default:(0,i.withCtx)((({param:t})=>[(0,i.createVNode)(a,{items:r.data.dropdownProp,onSelectItem:(e,i)=>{t.itemID=e,t.itemName=i},dropdownTitle:"Device",defaultValue:t.defaultValue},null,8,["items","onSelectItem","defaultValue"])])),_:1},8,["modelValue","onDelete"])]),(0,i.createElementVNode)("button",{class:"wg-button-wrapper",onClick:e[1]||(e[1]=(...t)=>r.addDataSource&&r.addDataSource(...t))}," Tambah datasource ")])])])),_:1},8,["onCancel"])}const ms=t=>((0,i.pushScopeId)("data-v-1c125a91"),t=t(),(0,i.popScopeId)(),t),gs={class:"wg-ordered-config-comp"},fs=["data-index"],vs={class:"order-body"},ys={class:"order-control"},ws=["onClick"],bs=ms((()=>(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})],-1))),xs=[bs],Cs=ms((()=>(0,i.createElementVNode)("button",{class:"wg-button-wrapper ordering"},[(0,i.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M120-280v-80h560v80H120Zm0-160v-80h560v80H120Zm0-160v-80h560v80H120Zm680 320q-17 0-28.5-11.5T760-320q0-17 11.5-28.5T800-360q17 0 28.5 11.5T840-320q0 17-11.5 28.5T800-280Zm0-160q-17 0-28.5-11.5T760-480q0-17 11.5-28.5T800-520q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440Zm0-160q-17 0-28.5-11.5T760-640q0-17 11.5-28.5T800-680q17 0 28.5 11.5T840-640q0 17-11.5 28.5T800-600Z"})])],-1)));function Is(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)("ul",gs,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(r.data.items,((s,n)=>((0,i.openBlock)(),(0,i.createElementBlock)("li",{key:s,onDragenter:e[2]||(e[2]=(...t)=>r.dragEnter&&r.dragEnter(...t)),onDragleave:e[3]||(e[3]=(...t)=>r.dragLeave&&r.dragLeave(...t)),onDragover:e[4]||(e[4]=(...t)=>r.dragOver&&r.dragOver(...t)),onDrop:e[5]||(e[5]=(...t)=>r.dragDrop&&r.dragDrop(...t)),"data-index":n},[(0,i.createElementVNode)("div",{class:"dragable",draggable:"true",onDragstart:e[0]||(e[0]=(...t)=>r.dragStart&&r.dragStart(...t)),onMousedown:e[1]||(e[1]=(...t)=>r.dragPush&&r.dragPush(...t))},[(0,i.createElementVNode)("div",vs,[(0,i.renderSlot)(t.$slots,"default",{key:n,param:s},void 0,!0)]),(0,i.createElementVNode)("div",ys,[(0,i.createElementVNode)("button",{class:"wg-button-wrapper",onClick:t=>r.onDelete(s)},xs,8,ws),Cs])],32)],40,fs)))),128))])}var Es={setup(t,e){let s=-1,r=null,n=(0,i.reactive)({items:[]});const o=t=>{const e=t.currentTarget;e.getElementsByClassName("ordering")[0].contains(r)?s=parseInt(e.parentElement.getAttribute("data-index")):t.preventDefault()},a=t=>{t.currentTarget.getElementsByClassName("order-body")[0].classList.add("over")},l=t=>{t.currentTarget.getElementsByClassName("order-body")[0].classList.remove("over")},h=t=>{t.preventDefault()},c=t=>{t.preventDefault(),console.log("drag drop"),t.currentTarget.getElementsByClassName("order-body")[0].classList.remove("over"),p(s,parseInt(t.currentTarget.getAttribute("data-index")))},d=t=>{r=t.target},p=(t,s)=>{console.log("data.items ",n.items);let r=n.items[t];n.items[t]=n.items[s],n.items[s]=r,e.emit("update:modelValue",(0,i.toRaw)(n.items))},u=t=>{e.emit("delete",(0,i.toRaw)(t))};return(0,i.onMounted)((()=>{n.items=(0,i.toRaw)(t.modelValue)})),(0,i.watch)(t.modelValue,(()=>{n.items=(0,i.toRaw)(t.modelValue)})),{dragStart:o,dragEnter:a,dragLeave:l,dragOver:h,dragDrop:c,dragPush:d,onDelete:u,data:n}},props:{modelValue:{type:Object}}};const $s=(0,ae.A)(Es,[["render",Is],["__scopeId","data-v-1c125a91"]]);var ks=$s;const Ss=t=>((0,i.pushScopeId)("data-v-0509e810"),t=t(),(0,i.popScopeId)(),t),Ts={class:"wgt-drpc-container"},Ms={class:"wgt-drpc-input-wrap"},Ps={key:0,for:"wgt-drpc-id",class:"wgt-drpc-label"},zs=["value"],Ls=Ss((()=>(0,i.createElementVNode)("span",{class:"icon-input"},[(0,i.createElementVNode)("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"24"},[(0,i.createElementVNode)("path",{d:"M480-360 280-560h400L480-360Z"})])],-1))),Bs={class:"wgt-drpc-search-wrap",ref:"searchEl"},Rs=["onClick"];function Vs(t,e,s,r,n,o){return(0,i.openBlock)(),(0,i.createElementBlock)("div",Ts,[(0,i.createElementVNode)("div",Ms,[""!=t.dropdownTitle?((0,i.openBlock)(),(0,i.createElementBlock)("label",Ps,(0,i.toDisplayString)(t.dropdownTitle),1)):(0,i.createCommentVNode)("",!0),(0,i.createElementVNode)("input",{type:"text",readonly:"",id:"wgt-drpc-id",class:"wgt-drpc-input",placeholder:"Pilih Device",value:t.data.selectItem},null,8,zs),Ls,(0,i.createElementVNode)("div",{class:"clickable",onClick:e[0]||(e[0]=(...e)=>t.onShow&&t.onShow(...e)),ref:"inputEl"},null,512)]),(0,i.createElementVNode)("div",Bs,[t.data.onLoad?((0,i.openBlock)(),(0,i.createElementBlock)("ul",{key:0,class:"wgt-drpc-search",onScroll:e[1]||(e[1]=(...e)=>t.onScroll&&t.onScroll(...e))},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(t.items.value,((e,s)=>((0,i.openBlock)(),(0,i.createElementBlock)("li",{key:s,onClick:i=>t.onClick(e.id)},(0,i.toDisplayString)(e.name),9,Rs)))),128))],32)):(0,i.createCommentVNode)("",!0)],512)])}var Ns=(0,i.defineComponent)({setup(t,{emit:e}){const s=(0,i.ref)(),r=(0,i.ref)(),n=(0,i.reactive)({onLoad:!1,selectItem:""}),o=t=>{t.currentTarget.scrollTop+t.currentTarget.clientHeight>=t.currentTarget.scrollHeight&&e("nextBatch")},a=t=>{r.value?.contains(t.target)||(n.onLoad=!1)},l=t=>{n.onLoad=!n.onLoad},h=i=>{const s=t.items?.value.filter((t=>t.id==i));n.selectItem=s&&s?.length>0?s[0].name:"",e("selectItem",i,n.selectItem)};return(0,i.onMounted)((()=>{t.defaultValue&&(n.selectItem=t.defaultValue),window.addEventListener("click",a)})),(0,i.onUnmounted)((()=>window.removeEventListener("click",a))),{onScroll:o,onShow:l,onClick:h,data:n,searchEl:s,inputEl:r}},props:{items:{type:Object},defaultValue:{type:Object},dropdownTitle:{type:Object,default:""}}});const As=(0,ae.A)(Ns,[["render",Vs],["__scopeId","data-v-0509e810"]]);var Ds=As,Fs={setup(t,e){const s=(0,i.reactive)({sortParam:[{itemID:null,itemName:"Device Z"}],dropdownProp:{value:[{id:0,name:"Device A"},{id:1,name:"Device B"},{id:2,name:"Device C"}]}});(0,i.watch)(s.sortParam,(()=>{s.sortParam}));const r=t=>{console.log("delete ",t)},n=()=>{e.emit("cancel")},o=()=>{s.sortParam.push({itemID:null,itemName:""})};return{data:s,onDelete:r,addDataSource:o,cancel:n}},components:{BaseConfig:ts,SortableComp:ks,DropdownSelectorComp:Ds}};const Os=(0,ae.A)(Fs,[["render",us],["__scopeId","data-v-102d5090"]]);var Hs=Os;function Ws(t,e,s,r,n,o){const a=(0,i.resolveComponent)("IrrigationDiagram"),l=(0,i.resolveComponent)("BaseConfigComp");return(0,i.openBlock)(),(0,i.createBlock)(l,{widgetName:"Peta Irigasi",fullPage:"true"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)(a)])),_:1})}const _s={style:{width:"100%",height:"100%","background-color":"#fff"},ref:"containerDiagram"},Ys=(0,i.createStaticVNode)('<div id="tip" style="position:fixed;left:50%;top:30%;transform:translate(-50%, -30%);min-width:290px;"><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"></path><path d="M10 3h4a8 8 0 1 1 0 16v3.5c-5-2-12-5-12-11.5a8 8 0 0 1 8-8zm2 14h2a6 6 0 1 0 0-12h-4a6 6 0 0 0-6 6c0 3.61 2.462 5.966 8 8.48V17z" fill="rgb(230,126,34)"></path></svg>Tip <ul style="padding-left:40px;margin-top:16px;"><li>Geser gambar diagram ke workspace</li><li>Untuk memilih lebih dari satu diagram tekan lama</li></ul></div>',1),Xs={id:"diagram",tabindex:"0",style:{"touch-action":"none","background-color":"#fff",display:"block","user-select":"none","-webkit-user-select":"none","-webkit-touch-callout":"none","pointer-events":"none"}},js=(0,i.createElementVNode)("g",{id:"canvas"},null,-1),Us=[js];function Gs(t,e,s,r,n,o){const a=(0,i.resolveComponent)("ap-menu-shape");return(0,i.openBlock)(),(0,i.createElementBlock)("div",_s,[(0,i.createVNode)(a,{id:"menu-shape"}),Ys,((0,i.openBlock)(),(0,i.createElementBlock)("svg",Xs,Us))],512)}const qs=(t,e)=>t.querySelector(`[data-key="${e}"]`);function Zs(t,e){t.style.transform=`translate(${e.x}px, ${e.y}px)`}const Ks=(t,...e)=>t?.classList.add(...e),Js=(t,e)=>t?.classList.remove(e),Qs=(t,e)=>t?.classList.contains(e);function tr(t,e,i,s){e.styles||(e.styles=[]);const r=e.styles.findIndex((t=>t.startsWith(i)));r>-1&&(Js(t,e.styles[r]),e.styles.splice(r,1)),e.styles.push(s),Ks(t,s)}const er=(t,e,i,s)=>t.addEventListener(e,i,{passive:!0,once:s}),ir=(t,e,i,s)=>t?.removeEventListener(e,i,{capture:s});function sr(t,e,i){t.querySelectorAll(e).forEach((t=>{t.onclick=i}))}const rr=(t,e)=>t.currentTarget.getAttribute(e);function nr(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&(i.innerHTML=e),i}function or(t){let e,i=0;for(const s of t.getElementsByTagName("tspan"))for(const t of ar(s.getBBox())){const s=Math.abs(t.x)+Math.abs(t.y);i<s&&(e=t,i=s)}return e}const ar=t=>[{x:t.x,y:t.y},{x:t.right,y:t.y},{x:t.x,y:t.bottom},{x:t.right,y:t.bottom}];function lr(t,e,i){return i<=t?t:t+Math.ceil((i-t)/e)*e}function hr(t,e){let i=t.pop();while(i)e(i),i=t.pop()}function cr(t,e,i){const s=i??1;return t.x+=s*e.x,t.y+=s*e.y,t}const dr=t=>JSON.parse(JSON.stringify(t));function pr(t){let e,i,s;function r(t){t.isPrimary&&t.isTrusted&&(e&&Math.abs(e.x-t.clientX)<3&&Math.abs(e.y-t.clientY)<3?t.stopImmediatePropagation():(e=null,void 0===t.movementX?(t[ur]=i?t.clientX-i:0,t[mr]=s?t.clientY-s:0,i=t.clientX,s=t.clientY):(t[ur]=t.movementX,t[mr]=t.movementY)))}t.addEventListener("pointerdown",(n=>{e={x:n.clientX,y:n.clientY},i=null,s=null,t.addEventListener("pointermove",r,{capture:!0,passive:!0}),t.addEventListener("pointerup",(e=>{ir(t,"pointermove",r,!0)}),{capture:!0,once:!0,passive:!0})}),{capture:!0,passive:!0})}const ur=Symbol("movementX"),mr=Symbol("movementY"),gr=Symbol("Canvas");function fr(t,e,i,s,r,n,o,a,l){let h,c=!1,d=!1;function p(t){d&&(c||(r(t),d))&&(vr(s,i.scale,t),c=!0,n(t))}function u(t){c?o(t):a(t),v(!0)}function m(t){e.contains(t.target)||(v(),l())}function g(){v(),l()}function f(e){!e[br]&&e.isPrimary&&(e[br]=!0,h=e.target,e.pointerId!==yr&&h.setPointerCapture(e.pointerId),er(h,"pointercancel",u,!0),er(h,"pointerup",u,!0),er(h,"pointermove",p),er(t,"wheel",g,!0),er(t,"pointerdown",m),d=!0)}function v(e){ir(h,"pointercancel",u),ir(h,"pointerup",u),ir(h,"pointermove",p),e||(ir(t,"pointerdown",m),ir(t,"wheel",g)),h=null,c=!1,d=!1}return er(e,"pointerdown",f),v}function vr(t,e,i){t.x+=i[ur]/e,t.y+=i[mr]/e}const yr=42;function wr(t){t.ownerSVGElement.focus(),t.dispatchEvent(new PointerEvent("pointerdown",{isPrimary:!0,pointerId:yr})),t.dispatchEvent(new PointerEvent("pointerup",{isPrimary:!0}))}const br=Symbol("processed"),xr=(t,e,i)=>({x:(e-t.position.x-t.offsetPosition.x)/t.scale,y:(i-t.position.y-t.offsetPosition.y)/t.scale});function Cr(t,e){const i=e/2;function s(t){const s=Math.round(t/e)*e;return t-s>0?s+i:s-i}t.x=s(t.x),t.y=s(t.y)}function Ir(t){const e=t[gr].data,i=$r(t.ownerSVGElement,e);function s(){t.style.transform=`matrix(${e.scale}, 0, 0, ${e.scale}, ${e.position.x}, ${e.position.y})`,i()}function r(t,i){if(t<.25||t>4)return;const r=t/e.scale;e.scale=t,e.position.x=r*(e.position.x-i.x)+i.x,e.position.y=r*(e.position.y-i.y)+i.y,s()}Er(t.ownerSVGElement,e,r,s),t.ownerSVGElement.addEventListener("wheel",(t=>{t.preventDefault();const i=t.deltaY||t.deltaX,s=Math.abs(i)<50?.05:.25;r(e.scale+(i<0?s:-s),kr(t))})),t[gr].move=function(t,i,r){e.position.x=t,e.position.y=i,e.scale=r,s()}}function Er(t,e,i,s){let r,n,o,a;function l(e){o=null,a=null,r?.id===e.pointerId&&(r=null),n?.id===e.pointerId&&(n=null),r||n||(ir(t,"pointermove",h),ir(t,"pointercancel",l),ir(t,"pointerup",l))}function h(t){if(t[br])return;if(r&&!n||!r&&n)return e.position.x=t.clientX+(r||n).shift.x,e.position.y=t.clientY+(r||n).shift.y,void s();if(!n||!r||n?.id!==t.pointerId&&r?.id!==t.pointerId)return;const l=Math.hypot(r.pos.x-n.pos.x,r.pos.y-n.pos.y),h={x:(r.pos.x+n.pos.x)/2,y:(r.pos.y+n.pos.y)/2};o&&(e.position.x=e.position.x+h.x-a.x,e.position.y=e.position.y+h.y-a.y,i(e.scale/o*l,h)),o=l,a=h,r.id===t.pointerId&&(r=Sr(t,e)),n.id===t.pointerId&&(n=Sr(t,e))}er(t,"pointerdown",(i=>{i[br]||!r&&!i.isPrimary||r&&n||(t.setPointerCapture(i.pointerId),r||(er(t,"pointermove",h),er(t,"pointercancel",l),er(t,"pointerup",l)),r?n||(n=Sr(i,e)):r=Sr(i,e))}))}function $r(t,e){let i;function s(e){i!==e&&(i=e,t.style.backgroundImage=`radial-gradient(rgb(73 80 87 / ${e}) 1px, transparent 0)`)}return s(.7),t.style.backgroundSize=`${e.cell}px ${e.cell}px`,function(){const i=e.cell*e.scale;e.scale<.5?s(0):e.scale<=.9?s(.3):s(.7),t.style.backgroundSize=`${i}px ${i}px`,t.style.backgroundPosition=`${e.position.x}px ${e.position.y}px`}}function kr(t){return{x:t.clientX,y:t.clientY}}function Sr(t,e){return{id:t.pointerId,pos:kr(t),shift:{x:e.position.x-t.clientX,y:e.position.y-t.clientY}}}function Tr(t){t.addEventListener("pointerdown",(t=>{if(!t.isPrimary||t[Lr]||!t.isTrusted)return;t.stopImmediatePropagation();const e=new PointerEvent("pointerdown",t);e[Lr]=!0,Mr(t).dispatchEvent(e)}),{capture:!0,passive:!0})}function Mr(t){return zr(t).find((t=>!t.hasAttribute("data-evt-no")))}function Pr(t){return zr(t)[0]}function zr(t){return document.elementsFromPoint(t.clientX,t.clientY).sort(((t,e)=>{const i=t.getAttribute("data-evt-index"),s=e.getAttribute("data-evt-index");return i===s?0:i>s?-1:1}))}const Lr=Symbol("routeed"),Br=Symbol("path"),Rr=Symbol("shape"),Vr='<svg data-cmd="del" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z" fill="rgb(52,71,103)"/></svg>',Nr='<svg data-cmd="copy" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M7 6V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3v3c0 .552-.45 1-1.007 1H4.007A1.001 1.001 0 0 1 3 21l.003-14c0-.552.45-1 1.007-1H7zM5.003 8L5 20h10V8H5.003zM9 6h8v10h2V4H9v2z" fill="rgb(52,71,103)"/></svg>';class Ar extends HTMLElement{constructor(t){super(),this._cmdHandler=t}connectedCallback(){const t=this.attachShadow({mode:"closed"});t.innerHTML=`\n\t\t<style>\n\t\t\t.ln { display: flex; }\n\t\t\t.ln > * {\n\t\t\t\theight: 24px;\n\t\t\t\tpadding: 10px;\n\t\t\t}\n\t\t\t[data-cmd] { cursor: pointer; }\n\t\t</style>\n\t\t<div class="ln">\n\t\t\t${Nr}\n\t\t\t${Vr}\n\t\t</div>`,sr(t,"[data-cmd]",(t=>this._cmdHandler(rr(t,"data-cmd"))))}}let Dr;function Fr(t,e,i){function s(t,e){Dr.style.left=`${t}px`,Dr.style.top=window.scrollY+e-Dr.getBoundingClientRect().height+"px"}return Dr=document.createElement("div"),Dr.style.cssText="position: fixed; box-shadow: 0px 0px 58px 2px rgb(34 60 80 / 20%); border-radius: 16px; background-color: rgba(255,255,255, .9);z-index:100;",Dr.append(i),document.body.append(Dr),s(t,e),{position:s,del:()=>{Dr.remove(),Dr=null}}}function Or(t){Dr.style.top=`${Dr.getBoundingClientRect().top+t}px`}function Hr(t,e){const i=xr(t[gr].data,window.innerWidth/2,window.innerHeight/2);Cr(i,t[gr].data.cell);const s=cr(i,Wr(e),-1);Yr(e,(t=>{t&&cr(t,s)}))}function Wr(t){const e=_r(t);return{x:e.min.x+(e.max.x-e.min.x)/2,y:e.min.y+(e.max.y-e.min.y)/2}}function _r(t){const e={x:1/0,y:1/0},i={x:-1/0,y:-1/0};return Yr(t,(t=>{t&&(e.x>t.x&&(e.x=t.x),e.y>t.y&&(e.y=t.y),i.x<t.x&&(i.x=t.x),i.y<t.y&&(i.y=t.y))})),{min:e,max:i}}function Yr(t,e){t.s.forEach((t=>{0===t.type?(e(t.s.p?.position),e(t.e.p?.position)):e(t.position)}))}function Xr(t){while(t.firstChild)(t.firstChild[Rr]||t.firstChild[Br]).del();t[gr].move(0,0,1)}function jr(t){t[gr].selectClear&&t[gr].selectClear()}function Ur(t,e){t[gr].selectClear=e}customElements.define("ap-grp-settings",Ar);const Gr="1.1",qr=t=>Zr([...t.children]);function Zr(t){const e={v:Gr,s:[]};for(const i of t)if(i[Rr])e.s.push(i[Rr].data);else{function s(e){const i=t.indexOf(e.shape?.shapeEl);return-1!==i?{s:i,k:e.shape.connectorKey}:{p:e.data}}const r=i[Br].data,n={type:0,s:s(r.s),e:s(r.e)};r.styles&&(n.c=r.styles),e.s.push(n)}return e}function Kr(t,e,i){if(e.v!==Gr)return alert("Wrong format"),null;i||Xr(t);const s=new Map;function r(e){let i=s.get(e);return i||(i=t[gr].shapeMap[e.type].create(e),t.append(i),s.set(e,i)),i}const n=t=>r(e.s[t]),o=[];for(const a of e.s)switch(a.type){case 0:{const e=t=>t.p?{data:t.p}:{shape:{shapeEl:n(t.s),connectorKey:t.k}},i=t[gr].shapeMap[0].create({styles:a.c,s:e(a.s),e:e(a.e)});o.push(i),t.append(i);break}default:r(a);break}return[...s.values(),...o]}let Jr;function Qr(t){t&&!Jr?(Jr=document.createElement("div"),Jr.style.cssText="z-index: 2; position: fixed; left: 0; top: 0; width:100%; height:100%; background: #fff; opacity: 0",Jr.innerHTML="<style>\n\t\t@keyframes blnk {\n\t\t\t0% { opacity: 0; }\n\t\t\t50% { opacity: 0.7; }\n\t\t\t100% {opacity: 0;}\n\t\t}\n\t\t.blnk { animation: blnk 1.6s linear infinite; }\n\t\t</style>",Jr.classList.add("blnk"),document.body.append(Jr)):t||(Jr.remove(),Jr=null)}function tn(t){document.getElementById("diagram").style.pointerEvents=t?"none":"unset",document.getElementById("tip").style.display=t?"unset":"none"}const en="dgrm";function sn(t){function e(e){const i=t();document.activeElement===i[0].ownerSVGElement&&(e.preventDefault(),e.clipboardData.setData(en,JSON.stringify(on(i))))}return document.addEventListener("copy",e),function(){ir(document,"copy",e)}}function rn(t){er(document,"paste",(e=>{if("TEXTAREA"===e.target.tagName.toUpperCase())return;const i=e.clipboardData.getData(en);i&&(tn(!1),jr(t),an(t,JSON.parse(i)))}))}const nn=(t,e)=>an(t,on(e)),on=t=>dr(Zr(t));function an(t,e){jr(t),Hr(t,e),pn(t,Kr(t,e,!0))}const ln="highlight-s",hn="highlight-e",cn="highlight";function dn(t){const e=t.ownerSVGElement;let i,s,r,n,o;function a(e){if(e[br]||!n)return void h();e[br]=!0,r&&(r.remove(),r=null);const i=e.clientX-t[gr].data.offsetPosition.x-s.x,a=e.clientY-t[gr].data.offsetPosition.y-s.y;n.width.baseVal.value=Math.abs(i),n.height.baseVal.value=Math.abs(a),i<0&&(o.x=e.clientX-t[gr].data.offsetPosition.x),a<0&&(o.y=e.clientY-t[gr].data.offsetPosition.y),n.style.transform=`translate(${o.x}px, ${o.y}px)`}function l(){if(n){const e=e=>fn(xr(t[gr].data,o.x,o.y),n.width.baseVal.value/t[gr].data.scale,n.height.baseVal.value/t[gr].data.scale,e.x,e.y);pn(t,t.children,e)}h()}function h(){clearTimeout(i),i=null,r?.remove(),r=null,n?.remove(),n=null,ir(e,"pointermove",a),ir(e,"wheel",h),ir(e,"pointerup",l)}er(e,"pointerdown",(c=>{!c[br]&&c.isPrimary?(er(e,"pointermove",a),er(e,"wheel",h,!0),er(e,"pointerup",l,!0),i=setTimeout((i=>{jr(t),r=nr("circle"),Ks(r,"ative-elem"),r.style.cssText="r:10px; fill: rgb(108 187 247 / 51%)",Zs(r,{x:c.clientX-t[gr].data.offsetPosition.x,y:c.clientY-t[gr].data.offsetPosition.y}),e.append(r),s={x:c.clientX-t[gr].data.offsetPosition.x,y:c.clientY-t[gr].data.offsetPosition.y},o={x:c.clientX-t[gr].data.offsetPosition.x,y:c.clientY-t[gr].data.offsetPosition.y},n=nr("rect"),n.style.cssText="rx:10px; fill: rgb(108 187 247 / 51%)",Zs(n,o),e.append(n)}),500)):h()}))}function pn(t,e,i){const s=t=>!i||i(t.position),r={shapes:[],shapesPaths:[],pathEnds:[],pathEndsPaths:[]};function n(t,e,i){return!e.shape&&s(e.data)?(r.pathEnds.push(e),Ks(t,i),1):e.shape&&s(e.shape.shapeEl[Rr].data)?2:0}for(const o of e)if(o[Rr])s(o[Rr].data)&&(Ks(o,cn),r.shapes.push(o));else if(o[Br]){const t=n(o,o[Br].data.s,ln),e=n(o,o[Br].data.e,hn);1!==t&&1!==e||r.pathEndsPaths.push(o),2!==t&&2!==e||r.shapesPaths.push(o)}un(t,r)}function un(t,e){if(1===e.shapes?.length&&!e.pathEnds?.length)return Js(e.shapes[0],"highlight"),void wr(e.shapes[0]);if(!e.shapes?.length&&1===e.pathEnds?.length)return void gn(e.pathEndsPaths[0]);if(!e.shapes?.length&&2===e.pathEnds?.length&&1===e.pathEndsPaths?.length)return gn(e.pathEndsPaths[0]),void wr(e.pathEndsPaths[0]);const i=t.ownerSVGElement;let s,r=!1,n=!1;const o=()=>{s?.del(),s=null};function a(t){o(),n=e.shapes?.some((e=>e.contains(t.target)))||e.pathEnds?.some((e=>e.el.contains(t.target))),n||t.target===i?(n&&t.stopImmediatePropagation(),i.setPointerCapture(t.pointerId),er(i,"pointerup",h,!0),er(i,"pointermove",c)):d()}function l(t){e.shapes?.forEach((e=>{t(e[Rr].data.position),e[Rr].drawPosition()})),e.pathEnds?.forEach((e=>t(e.data.position))),e.pathEndsPaths?.forEach((t=>t[Br].draw()))}function h(i){if(r)l((e=>Cr(e,t[gr].data.cell)));else{if(!n)return void d();s=Fr(i.clientX-10,i.clientY-10,new Ar((i=>{switch(i){case"del":hr(e.shapes,(t=>t[Rr].del())),hr(e.pathEndsPaths,(t=>t[Br].del())),d();break;case"copy":nn(t,mn(e));break}})))}d(!0)}function c(e){n?(r=!0,l((i=>vr(i,t[gr].data.scale,e)))):d(!0)}function d(s){ir(i,"pointerup",h),ir(i,"pointermove",c),r=!1,n=!1,s||(Ur(t,null),p&&(p(),p=null),ir(i,"pointerdown",a,!0),o(),hr(e.shapes,(t=>Js(t,cn))),hr(e.pathEndsPaths,(t=>gn(t))),e.pathEnds=null,e.shapesPaths=null)}i.addEventListener("pointerdown",a,{passive:!0,capture:!0}),Ur(t,d);let p=sn((()=>mn(e)))}function mn(t){const e=new Set,i=e=>t.shapes.includes(e.shape?.shapeEl)||t.pathEnds.includes(e);function s(t){i(t[Br].data.s)&&i(t[Br].data.e)&&e.add(t)}return t.shapesPaths?.forEach(s),t.pathEndsPaths?.forEach(s),[...t.shapes,...e]}function gn(t){Js(t,ln),Js(t,hn)}const fn=(t,e,i,s,r)=>t.x<=s&&s<=t.x+e&&t.y<=r&&r<=t.y+i;class vn extends HTMLElement{constructor(t,e){super(),this._pathElement=e,this._canvas=t}connectedCallback(){const t=this._pathElement[Br].data.styles,e=t=>this._pathElement[Br].data.styles?.includes(t)?'class="actv"':"",i=this.attachShadow({mode:"closed"});i.innerHTML=`\n\t\t<style>\n\t\t\t.ln { display: flex; }\n\t\t\t.ln > * {\n\t\t\t\theight: 24px;\n\t\t\t\tpadding: 10px;\n\t\t\t\tfill-opacity: 0.3;\n\t\t\t\tstroke-opacity: 0.3;\n\t\t\t}\n\t\t\t[data-cmd] { cursor: pointer; }\n\t\t\t.actv { \n\t\t\t\tfill-opacity: 1;\n\t\t\t\tstroke-opacity: 1;\n\t\t\t}\n\t\t</style>\n\t\t<ap-shape-edit id="edit" edit-btn="true">\n\t\t\t<div class="ln">\n\t\t\t\t<svg data-cmd data-cmd-arg="arw-s" ${e("arw-s")} viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M7.828 11H20v2H7.828l5.364 5.364-1.414 1.414L4 12l7.778-7.778 1.414 1.414z" fill="rgb(52,71,103)"/></svg>\n\t\t\t\t<svg data-cmd data-cmd-arg="arw-e" ${e("arw-e")} viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z" fill="rgb(52,71,103)"/></svg>\n\t\t\t\t<svg data-cmd data-cmd-arg="dash" ${e("dash")} viewBox="0 0 24 24" width="24" height="24"><path d="M 2,11 L 20,11" stroke="rgb(52,71,103)" style="stroke-dasharray: 4,3; stroke-width: 3;"></path></svg>\n\t\t\t</div>\n\t\t</ap-shape-edit>`,er(i.getElementById("edit"),"cmd",(t=>{switch(t.detail.cmd){case"style":tr(this._pathElement,this._pathElement[Br].data,"cl-",t.detail.arg);break;case"del":this._pathElement[Br].del();break;case"copy":nn(this._canvas,[this._pathElement]);break}})),sr(i,"[data-cmd]",(e=>{const i=rr(e,"data-cmd-arg"),s=t.indexOf(i);s>-1?(Js(this._pathElement,i),t.splice(s,1),Js(e.currentTarget,"actv")):(Ks(this._pathElement,i),t.push(i),Ks(e.currentTarget,"actv"))}))}}function yn(t,e){const i=nr("g",'\n\t\t<path data-key="outer" d="M0 0" stroke="transparent" stroke-width="20" fill="none" />\n\t\t<line data-key="path" x1="0" y1="0" x2="0" y2="0" stroke="#495057" stroke-width="1.8" fill="none" style="pointer-events: none;" />\n\t\t<line data-key="selected" x1="0" y1="0" x2="0" y2="0" stroke="transparent" stroke-width="10" fill="none" style="pointer-events: none;" />\n\t\t<g data-key="start">\n\t\t\t<circle data-evt-index="1" class="path-end" r="10" stroke-width="0" fill="transparent" />\n\t\t\t<path class="path" d="M-7 7 l 7 -7 l -7 -7" stroke="#495057" stroke-width="1.8" fill="none" style="pointer-events: none;"></path>\n\t\t</g>\n\t\t<g data-key="end">\n\t\t\t<circle data-evt-index="1" class="path-end" r="10" stroke-width="0" fill="transparent" />\n\t\t\t<path class="path" d="M-7 7 l 7 -7 l -7 -7" stroke="#495057" stroke-width="1.8" fill="none" style="pointer-events: none;"></path>\n\t\t</g>');Ks(i,"shpath"),e.s.el=qs(i,"start"),e.e.el=qs(i,"end"),e.styles=e.styles??[];const s=Mn(i,"outer");function r(){if(!e.s.shape||!e.e.shape){const t=kn(e.s.data.position,e.e.data.position);e.e.shape||(e.e.data.dir=t),e.s.shape||(e.s.data.dir=$n(t))}const t=Sn(e);s.forEach((e=>e.setAttribute("d",t)));const r=qs(i,"path");r.setAttribute("x1",e.s.data.position.x),r.setAttribute("y1",e.s.data.position.y),r.setAttribute("x2",e.e.data.position.x),r.setAttribute("y2",e.e.data.position.y);const n=qs(i,"selected");n.setAttribute("x1",e.s.data.position.x),n.setAttribute("y1",e.s.data.position.y),n.setAttribute("x2",e.e.data.position.x),n.setAttribute("y2",e.e.data.position.y);let o=180*Math.atan2(e.e.data.position.y-e.s.data.position.y,e.e.data.position.x-e.s.data.position.x)/Math.PI;In(e.s,o),In(e.e,o)}function n(t){Cn(t.shape)?.pathDel(i)}function o(t){t.shape&&(t.data=Cn(t.shape).pathAdd(t.shape.connectorKey,i))}let a;function l(){m(),g(),n(e.s),n(e.e),i.remove()}let h,c,d,p=0;function u(s){if(2!==p){if(1===p)return p=2,void(a=Fr(s.clientX-10,s.clientY-10,new vn(t,i)));p=1,Ks(i,"select"),En(e.s,2),En(e.e,2),Ur(t,m),h=sn((()=>[i]))}}function m(){p=0,Js(i,"select"),En(e.s,1),En(e.e,1),a?.del(),a=null,c&&(c(),c=null,i.style.pointerEvents="unset"),Ur(t,null),h&&(h(),h=null)}const g=fr(t.ownerSVGElement,i,t[gr].data,{get x(){return e[d]?.data.position.x},set x(t){d&&(e[d].data.position.x=t)},get y(){return e[d]?.data.position.y},set y(t){d&&(e[d].data.position.y=t)}},(s=>{m(),d=e.e.el.contains(s.target)?"e":e.s.el.contains(s.target)?"s":null,d&&(e[d].shape&&(e[d].shape.shapeEl!==e["s"===d?"e":"s"].shape?.shapeEl&&n(e[d]),e[d].shape=null,e[d].data={dir:e[d].data.dir,position:xr(t[gr].data,s.clientX,s.clientY)}),i.style.pointerEvents="none",c=Tn(i.parentElement))}),(i=>{d?r():wn(t[gr].data,e,r,i)}),(i=>{if(d){const s=Pr(i),n=s?.getAttribute("data-connect");n?(e[d].shape={shapeEl:s.parentElement,connectorKey:n},o(e[d])):Cr(e[d].data.position,t[gr].data.cell),r()}else bn(t[gr].data,e,r);m()}),u,m);return i[Br]={draw:r,pointerCapture:t=>e.e.el.dispatchEvent(new PointerEvent("pointerdown",t)),del:l,data:e},e.styles&&Ks(i,...e.styles),o(e.s),o(e.e),r(),i}function wn(t,e,i,s){const r=e=>vr(e,t.scale,s);xn(e.s,r),xn(e.e,r),e.s.shape||e.e.shape||i()}function bn(t,e,i){const s=e=>Cr(e,t.cell);xn(e.s,s),xn(e.e,s),e.s.shape&&e.e.shape||i()}function xn(t,e){t.shape?(e(Cn(t.shape).data.position),Cn(t.shape).drawPosition()):e(t.data.position)}customElements.define("ap-path-settings",vn);const Cn=t=>t?.shapeEl[Rr];function In(t,e){t.el.style.transform=`translate(${t.data.position.x}px, ${t.data.position.y}px) rotate(${e}deg)`}function En(t,e){t.el.firstElementChild.setAttribute("data-evt-index",e.toString())}const $n=t=>"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"top";function kn(t,e){const i=Math.atan2(e.y-t.y,e.x-t.x);return Pn(i,-.8,.8)?"left":Pn(i,.8,2.4)?"top":Pn(i,2.4,3.2)||Pn(i,-3.2,-2.4)?"right":"bottom"}function Sn(t){let e=.5*Math.hypot(t.s.data.position.x-t.e.data.position.x,t.s.data.position.y-t.e.data.position.y);function i(t){return"right"===t.dir||"left"===t.dir?"right"===t.dir?t.position.x+e:t.position.x-e:t.position.x}function s(t){return"right"===t.dir||"left"===t.dir?t.position.y:"bottom"===t.dir?t.position.y+e:t.position.y-e}return e=e>70?70:e<15?15:e,`M ${t.s.data.position.x} ${t.s.data.position.y} C ${i(t.s.data)} ${s(t.s.data)}, ${i(t.e.data)} ${s(t.e.data)}, ${t.e.data.position.x} ${t.e.data.position.y}`}function Tn(t){let e=null;function i(t){const i=Pr(t);if(e!==i){Qs(i,"hovertrack")&&Ks(i,"hover");let t=!1;Qs(i?.parentElement,"hovertrack")&&(Ks(i.parentElement,"hover"),t=!0),Js(e,"hover"),e?.parentElement===i?.parentElement&&t||Js(e?.parentElement,"hover"),e=i}}return er(t,"pointermove",i),function(){ir(t,"pointermove",i),Js(e,"hover"),Js(e?.parentElement,"hover"),e=null}}const Mn=(t,...e)=>e.map((e=>qs(t,e))),Pn=(t,e,i)=>e<=t&&t<=i;function zn(t,e,i){const s=Ln(i||"",t.x?.baseVal[0]?.value??0);t.innerHTML=s.s,t.y.baseVal[0].newValueSpecifiedUnits(t.y.baseVal[0].SVG_LENGTHTYPE_EMS,s.c>0?e-s.c/2:e)}function Ln(t,e){let i=0;return{s:t.split("\n").map(((t,s)=>(i=s,`<tspan x="${e}" dy="${0===s?.41:1}em" ${0===t.length?'visibility="hidden"':""}>${0===t.length?".":Bn(t).replaceAll(" ","&nbsp;")}</tspan>`))).join(""),c:i}}function Bn(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function Rn(t,e,i,s,r){let n=nr("foreignObject");const o=document.createElement("textarea"),a=()=>Vn(t,n,o,h,l.textAlign);o.value=i||"",o.oninput=function(){zn(t,e,o.value),s(o.value),a()},o.onblur=function(){r(o.value)},o.onpointerdown=function(t){t.stopImmediatePropagation()},n.appendChild(o),t.parentElement.appendChild(n);const l=getComputedStyle(o),h=parseInt(l.paddingLeft)+parseInt(l.borderWidth);return a(),o.focus(),{dispose:()=>{n.remove(),n=null},draw:a}}function Vn(t,e,i,s,r){const n=t.getBBox(),o=n.width+20;e.width.baseVal.value=o+2*s+2,e.x.baseVal.value=n.x-s-("center"===r?10:"right"===r?20:0),e.height.baseVal.value=n.height+2*s+3,e.y.baseVal.value=n.y-s,i.style.width=`${o}px`,i.style.height=`${n.height}px`}function Nn(t,e,i,s){const r=new An;return er(r,"cmd",(i=>{switch(i.detail.cmd){case"style":tr(e,e[Rr].data,"cl-",i.detail.arg);break;case"del":e[Rr].del();break;case"copy":nn(t,[e]);break}})),Fr(i,s,r)}class An extends HTMLElement{connectedCallback(){const t=this.attachShadow({mode:"closed"});t.innerHTML=`<style>\n\t\t\t.ln { display: flex; }\n\t\t\t.ln > * {\n\t\t\t\theight: 24px;\n\t\t\t\tpadding: 10px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t#prop { padding-bottom: 10px; }\n\n\t\t\t.crcl { width: 25px; height: 25px; border-radius: 50%; }\n\t\t</style>\n\t\t<div id="pnl">\n\t\t\t<div id="clr" style="display: none;">\n\t\t\t\t<div class="ln">\n\t\t\t\t\t<div data-cmd="style" data-cmd-arg="cl-red">\n\t\t\t\t\t\t<div class="crcl" style="background: #E74C3C"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-cmd="style" data-cmd-arg="cl-orange">\n\t\t\t\t\t\t<div class="crcl" style="background: #ff6600"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-cmd="style" data-cmd-arg="cl-green">\n\t\t\t\t\t\t<div class="crcl" style="background: #19bc9b"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="ln">\n\t\t\t\t\t<div data-cmd="style" data-cmd-arg="cl-blue">\n\t\t\t\t\t\t<div class="crcl" style="background: #1aaee5"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-cmd="style" data-cmd-arg="cl-dblue">\n\t\t\t\t\t\t<div class="crcl" style="background: #1D809F"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div data-cmd="style" data-cmd-arg="cl-dgray">\n\t\t\t\t\t\t<div class="crcl" style="background: #495057"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id="prop" style="display: none;"><slot id="slot"></slot></div>\n\t\t</div>\n\t\t<div class="ln">\n\t\t\t<svg data-toggle="clr" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M19.228 18.732l1.768-1.768 1.767 1.768a2.5 2.5 0 1 1-3.535 0zM8.878 1.08l11.314 11.313a1 1 0 0 1 0 1.415l-8.485 8.485a1 1 0 0 1-1.414 0l-8.485-8.485a1 1 0 0 1 0-1.415l7.778-7.778-2.122-2.121L8.88 1.08zM11 6.03L3.929 13.1 11 20.173l7.071-7.071L11 6.029z" fill="rgb(52,71,103)"/></svg>\n\t\t\t<svg data-toggle="prop"  ${this.getAttribute("edit-btn")?"":'style="display: none;"'} viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12.9 6.858l4.242 4.243L7.242 21H3v-4.243l9.9-9.9zm1.414-1.414l2.121-2.122a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414l-2.122 2.121-4.242-4.242z" fill="rgb(52,71,103)"/></svg>\n\t\t\t${Nr}\n\t\t\t${Vr}\n\t\t</div>`;{const e=t.getElementById("pnl");function i(t){Or(window.scrollY+t*e.getBoundingClientRect().height)}let s;sr(t,"[data-toggle]",(e=>{s&&(i(1),Dn(s,!1));const r=t.getElementById(rr(e,"data-toggle"));s!==r?(Dn(r,!0),i(-1),s=r):s=null}))}sr(t,"[data-cmd]",(t=>{this.dispatchEvent(new CustomEvent("cmd",{detail:{cmd:rr(t,"data-cmd"),arg:rr(t,"data-cmd-arg")}}))}))}}function Dn(t,e){t.style.display=e?"unset":"none"}function Fn(t,e,i,s,r,n){const o=nr("g",`${i}\n\t\t${Object.entries(s).map((t=>`<circle data-key="${t[0]}" data-connect="${t[1].dir}"\tclass="hovertrack" data-evt-index="2" r="10" cx="0" cy="0" style="transform: translate(${t[1].position.x}px, ${t[1].position.y}px);" />`)).join()}`),a={el:qs(o,"text"),vMid:0};zn(a.el,a.vMid,e.title);const l=On(t,o,e,s,a,n,(()=>r(a.el)));return{el:o,cons:s,draw:l.draw}}function On(t,e,i,s,r,n,o){let a,l;function h(){a?.dispose(),a=null,l?.del(),l=null}function c(t){i.title=t,o()}const d=n??Nn,p=Hn(t,e,i,s,(()=>{a=Rn(r.el,r.vMid,i.title,c,c);const s=e.getBoundingClientRect();l=d(t,e,s.left+10,s.top+10)}),h);return i.styles&&Ks(e,...i.styles),e[Rr].del=function(){p.del(),e.remove()},{draw:()=>{if(p.drawPosition(),l){const t=e.getBoundingClientRect();l.position(t.left+10,t.top+10)}a&&a.draw()}}}function Hn(t,e,i,s,r,n){Ks(e,"hovertrack");const o=dr(s),a=new Set;function l(){e.style.transform=`translate(${i.position.x}px, ${i.position.y}px)`;for(const t in s)o[t].position={x:s[t].position.x+i.position.x,y:s[t].position.y+i.position.y};for(const t of a)t[Br].draw()}let h,c=0;function d(){n(),c=0,Js(e,"select"),Js(e,"highlight"),Ur(t,null),h&&(h(),h=null)}const p=fr(t.ownerSVGElement,e,t[gr].data,i.position,(i=>{d();const s=i.target.getAttribute("data-connect");if(s){p();const r=yn(t,{s:{shape:{shapeEl:e,connectorKey:s}},e:{data:{dir:$n(o[s].dir),position:xr(t[gr].data,i.clientX,i.clientY)}}});e.parentNode.append(r),r[Br].pointerCapture(i),a.add(r)}}),l,(e=>{Cr(i.position,t[gr].data.cell),l()}),(i=>{if(2!==c){if(1===c)return c=2,Js(e,"select"),Ks(e,"highlight"),void r();c=1,Ks(e,"select"),Ur(t,d),h=sn((()=>[e]))}}),d);return e[Rr]={pathAdd:function(t,e){return a.add(e),o[t]},pathDel:function(t){a.delete(t)},drawPosition:l,data:i},{drawPosition:l,del:()=>{d(),p();for(const t of a)t[Br].del()}}}function Wn(t,e){const i=20,s=`\n\t\t<circle data-key="outer" data-evt-no data-evt-index="2" r="72" fill="transparent" stroke-width="0" />\n\t\t<circle data-key="main" r="${i}" fill="#ff6600" stroke="#fff" stroke-width="1" />\n\t\t<text data-key="text" x="0" y="0" text-anchor="middle" style="pointer-events: none;" fill="#fff">&nbsp;</text>`,r=Fn(t,e,s,{right:{dir:"right",position:{x:i,y:0}},left:{dir:"left",position:{x:-i,y:0}},bottom:{dir:"bottom",position:{x:0,y:i}},top:{dir:"top",position:{x:0,y:-i}}},(t=>{const s=Yn(t,i,24);s!==e.r&&(e.r=s,n())}));function n(){r.cons.right.position.x=e.r,r.cons.left.position.x=-e.r,r.cons.bottom.position.y=e.r,r.cons.top.position.y=-e.r;for(const t in r.cons)Zs(qs(r.el,t),r.cons[t].position);_n(r.el,"outer",e.r+24),_n(r.el,"main",e.r),r.draw()}return e.r&&e.r!==i?n():r.draw(),r.el}function _n(t,e,i){qs(t,e).r.baseVal.value=i}function Yn(t,e,i){const s=or(t);return lr(e,i,Math.sqrt(s.x**2+s.y**2))}customElements.define("ap-shape-edit",An);const Xn=(t,e,i,s)=>Fr(i,s,new jn(t,e));class jn extends HTMLElement{constructor(t,e){super(),this._rectElement=e,this._canvas=t}connectedCallback(){const t=this.attachShadow({mode:"closed"});t.innerHTML='\n\t\t<style>\n\t\t\t.ln { display: flex; }\n\t\t\t.ln > * {\n\t\t\t\theight: 24px;\n\t\t\t\tpadding: 10px;\n\t\t\t\tfill-opacity: 0.3;\n\t\t\t\tstroke-opacity: 0.3;\n\t\t\t}\n\t\t\t[data-cmd] { cursor: pointer; }\n\n\t\t\t.ta-1 [data-cmd-arg="1"],\n\t\t\t.ta-2 [data-cmd-arg="2"],\n\t\t\t.ta-3 [data-cmd-arg="3"]\n\t\t\t{ fill-opacity: 1; stroke-opacity: 1; }\n\t\t</style>\n\t\t<ap-shape-edit id="edit" edit-btn="true">\n\t\t\t<div class="ln">\n\t\t\t\t<svg data-cmd data-cmd-arg="1" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 15h14v2H3v-2zm0-5h18v2H3v-2zm0-5h14v2H3V9z" fill="rgb(52,71,103)"/></svg>\n\t\t\t\t<svg data-cmd data-cmd-arg="2" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm2 15h14v2H5v-2zm-2-5h18v2H3v-2zm2-5h14v2H5V9z" fill="rgb(52,71,103)"/></svg>\n\t\t\t\t<svg data-cmd data-cmd-arg="3" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm4 15h14v2H7v-2zm-4-5h18v2H3v-2zm4-5h14v2H7V9z" fill="rgb(52,71,103)"/></svg>\n\t\t\t</div>\n\t\t</ap-shape-edit>';const e=this._rectElement[Rr].data,i=t.getElementById("edit");Ks(i,`ta-${e.a}`),er(i,"cmd",(t=>{switch(t.detail.cmd){case"style":tr(this._rectElement,e,"cl-",t.detail.arg);break;case"del":this._rectElement[Rr].del();break;case"copy":nn(this._canvas,[this._rectElement]);break}})),sr(t,"[data-cmd]",(t=>{const s=Number.parseInt(rr(t,"data-cmd-arg"));if(s===e.a)return;const r=e.a;e.a=s,this._rectElement[Rr].draw(),Js(i,`ta-${r}`),Ks(i,`ta-${e.a}`)}))}}function Un(t,e){e.w=e.w??96,e.h=e.h??48,e.a=e.a??(e.t?1:2);const i=`\n\t\t<rect data-key="outer" data-evt-no data-evt-index="2" width="144" height="96" x="-72" y="-48" fill="transparent" stroke="transparent" stroke-width="0" />\n\t\t<rect data-key="main" width="96" height="48" x="-48" y="-24" rx="15" ry="15" fill="#1aaee5" stroke="#fff" stroke-width="1" />\n\t\t<text data-key="text" y="0" x="${qn(e)}" style="pointer-events: none;" fill="#fff">&nbsp;</text>`,s=Fn(t,e,i,{right:{dir:"right",position:{x:48,y:0}},left:{dir:"left",position:{x:-48,y:0}},bottom:{dir:"bottom",position:{x:0,y:24}},top:{dir:"top",position:{x:0,y:-24}}},(t=>{const i=t.getBBox(),s=lr(96,48,i.width+(e.t?6:0)),r=lr(48,48,i.height);e.w===s&&e.h===r||(e.w=s,e.h=r,o())}),e.t?Xn:Nn);Ks(s.el,e.t?"shtxt":"shrect");let r=e.w,n=e.a;function o(t){const i=e.w/-2,o=e.h/-2,a=0;s.cons.right.position.x=-i,s.cons.left.position.x=i,s.cons.bottom.position.y=-o,s.cons.bottom.position.x=a,s.cons.top.position.y=o,s.cons.top.position.x=a;for(const e in s.cons)Zs(qs(s.el,e),s.cons[e].position);if(Gn(s.el,"main",e.w,e.h,i,o),Gn(s.el,"outer",e.w+48,e.h+48,i-24,o-24),t||n!==e.a||r!==e.w){let t,o;switch(e.a){case 1:t=i+8,o=(e.w-r)/2;break;case 2:t=0,o=0;break;case 3:t=-i-8,o=(e.w-r)/-2;break}const a=qs(s.el,"text");a.x.baseVal[0].value=t,a.querySelectorAll("tspan").forEach((e=>{e.x.baseVal[0].value=t})),e.position.x+=o,Js(s.el,`ta-${n}`),Ks(s.el,`ta-${e.a}`),n=e.a,r=e.w}s.draw()}return Ks(s.el,`ta-${e.a}`),96!==e.w||48!==e.h?o(!0):s.draw(),s.el[Rr].draw=o,s.el}function Gn(t,e,i,s,r,n){const o=qs(t,e);o.width.baseVal.value=i,o.height.baseVal.value=s,o.x.baseVal.value=r,o.y.baseVal.value=n}customElements.define("ap-rect-txt-settings",jn);const qn=t=>1===t.a?-40:2===t.a?0:40;function Zn(t,e){const i='\n\t\t<path data-key="outer" data-evt-no data-evt-index="2" d="M-72 0 L0 -72 L72 0 L0 72 Z" stroke-width="0" fill="transparent" />\n\t\t<path data-key="border" d="M-39 0 L0 -39 L39 0 L0 39 Z" stroke-width="20" stroke="#fff"\tfill="transparent" stroke-linejoin="round" />\n\t\t<path data-key="main" d="M-39 0 L0 -39 L39 0 L0 39 Z" stroke-width="18" stroke-linejoin="round"\tstroke="#1D809F" fill="#1D809F" />\n\t\t<text data-key="text" x="0" y="0" text-anchor="middle" style="pointer-events: none;" fill="#fff">&nbsp;</text>',s=Fn(t,e,i,{right:{dir:"right",position:{x:48,y:0}},left:{dir:"left",position:{x:-48,y:0}},bottom:{dir:"bottom",position:{x:0,y:48}},top:{dir:"top",position:{x:0,y:-48}}},(t=>{const i=lr(96,48,Qn(t)-20);i!==e.w&&(e.w=i,r())}));function r(){const t=Jn(e.w,0);s.cons.right.position.x=t.r.x,s.cons.left.position.x=t.l.x,s.cons.bottom.position.y=t.b.y,s.cons.top.position.y=t.t.y;for(const e in s.cons)Zs(qs(s.el,e),s.cons[e].position);const i=Jn(e.w,9);Kn(s.el,"main",i),Kn(s.el,"border",i),Kn(s.el,"outer",Jn(e.w,-24)),s.draw()}return Ks(s.el,"shrhomb"),e.w&&96!==e.w?r():s.draw(),s.el}function Kn(t,e,i){qs(t,e).setAttribute("d",`M${i.l.x} ${i.l.y} L${i.t.x} ${i.t.y} L${i.r.x} ${i.r.y} L${i.b.x} ${i.b.y} Z`)}function Jn(t,e){const i=t/2,s=e-i,r=i-e;return{l:{x:s,y:0},t:{x:0,y:s},r:{x:r,y:0},b:{x:0,y:r}}}function Qn(t){const e=or(t);return 2*(Math.abs(e.x)+Math.abs(e.y))}function to(t){return{0:{create:e=>yn(t,e)},1:{create:e=>Wn(t,e)},2:{create:e=>Un(t,e)},3:{create:e=>(e.t=!0,Un(t,e))},4:{create:e=>Zn(t,e)}}}s(4603),s(7566),s(8721),s(6573),s(8100),s(7936),s(7467),s(4732),s(9577);async function eo(t,e){return ro(await t.arrayBuffer(),no(e))}async function io(t,e,i){return so(await t.arrayBuffer(),no(e),i)}function so(t,e,i){let s,r;const n=ro(t,e);if(n)s=new DataView(t,0,n.byteOffset-8),r=new DataView(t,n.byteOffset+n.byteLength+4);else{const e=t.byteLength-12;s=new DataView(t,0,e),r=new DataView(t,e)}const o=new DataView(new ArrayBuffer(8));return o.setUint32(0,i.length),o.setUint32(4,e),new Blob([s,o,i,new Uint32Array([0]),r],{type:"image/png"})}function ro(t,e){const i=new DataView(t,8);let s,r=0,n=i.getUint32(4);while(1229278788!==n){if(s=i.getUint32(r),n===e)return new DataView(t,r+16,s);r=r+12+s,n=i.getUint32(r+4)}return null}function no(t){return new DataView((new TextEncoder).encode(t).buffer).getUint32(0)}function oo(t,e,i,s){const r=new Image;r.width=e.width*i*window.devicePixelRatio,r.height=e.height*i*window.devicePixelRatio,r.onload=function(){const t=document.createElement("canvas");t.width=r.width,t.height=r.height,t.style.width=`${r.width}px`,t.style.height=`${r.height}px`;const i=t.getContext("2d");i.imageSmoothingEnabled=!1,i.drawImage(r,e.x,e.y,e.width,e.height,0,0,r.width,r.height),URL.revokeObjectURL(r.src),t.toBlob(s,"image/png")},t.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,r.width),t.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,r.height),r.src=URL.createObjectURL(new Blob([(new XMLSerializer).serializeToString(t)],{type:"image/svg+xml;charset=utf-8"}))}function ao(t,e,i){const s=t.getBoundingClientRect(),r=t.ownerSVGElement.cloneNode(!0);r.style.backgroundImage=null,r.querySelectorAll(".select, .highlight").forEach((t=>t.classList.remove("select","highlight")));const n=r.getElementsByTagName("foreignObject");while(n[0])n[0].parentNode.removeChild(n[0]);const o=t[gr].data,a=r.children[1],l=1/o.scale;a.style.transform=`matrix(1, 0, 0, 1, ${l*(o.position.x+15*o.scale-s.x)}, ${l*(o.position.y+15*o.scale-s.y)})`,oo(r,{x:0,y:0,height:s.height/o.scale+30,width:s.width/o.scale+30},3,(async t=>i(await io(t,"dgRm",(new TextEncoder).encode(e)))))}async function lo(t){const e=await eo(t,"dgRm");return e?(new TextDecoder).decode(e):null}const ho="https://localhost:7156/api";async function co(t,e){return await fetch(`${ho}/${t}`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)})}function po(){const t=new Uint8Array(4);window.crypto.getRandomValues(t);const e=new Date;return`${e.getUTCFullYear()}${(e.getUTCMonth()+1).toString().padStart(2,"0")}${Array.from(t,(t=>t.toString(16).padStart(2,"0"))).join("")}`}function uo(t,e){"showSaveFilePicker"in window?mo(t):go(t,e)}async function mo(t){try{const e=await(await window.showSaveFilePicker({types:[{description:"PNG Image",accept:{"image/png":[".png"]}}]})).createWritable();await e.write(t),await e.close()}catch{alert("File not saved")}}function go(t,e){const i=document.createElement("a");i.download=e,i.href=URL.createObjectURL(t),i.click(),URL.revokeObjectURL(i.href),i.remove()}function fo(t,e){const i=document.createElement("input");i.type="file",i.multiple=!1,i.accept=t,i.onchange=async function(){e(i.files?.length?i.files[0]:null)},i.click(),i.remove()}class vo extends HTMLElement{connectedCallback(){const t=this.attachShadow({mode:"closed"});t.innerHTML='\n\t\t\t<style>\n\t\t\t.menu {\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 15px;\n\t\t\t\tleft: 15px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t\t#options {\n\t\t\t\tposition: fixed;\n\t\t\t\tpadding: 15px;\n\t\t\t\tbox-shadow: 0px 0px 58px 2px rgb(34 60 80 / 20%);\n\t\t\t\tborder-radius: 16px;\n\t\t\t\tbackground-color: rgba(255,255,255, .9);\n\n\t\t\t\ttop: 0px;\n\t\t\t\tleft: 0px;\n\n\t\t\t\tz-index: 1;\n\t\t\t}\n\n\t\t\t#options div, #options a { \n\t\t\t\tcolor: rgb(13, 110, 253); \n\t\t\t\tcursor: pointer; margin: 10px 0;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tline-height: 25px;\n\t\t\t\ttext-decoration: none;\n\t\t\t}\n\t\t\t#options div svg, #options a svg { margin-right: 10px; }\n\t\t\t</style>\n\t\t\t<svg id="menu" class="menu" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgb(52,71,103)"/></svg>\n\t\t\t<div id="options" style="visibility: hidden;">\n\t\t\t \t<div id="menu2" style="margin: 0 0 15px;"><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgb(52,71,103)"/></svg></div>\n\t\t\t\t<div id="new"><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M9 2.003V2h10.998C20.55 2 21 2.455 21 2.992v18.016a.993.993 0 0 1-.993.992H3.993A1 1 0 0 1 3 20.993V8l6-5.997zM5.83 8H9V4.83L5.83 8zM11 4v5a1 1 0 0 1-1 1H5v10h14V4h-8z" fill="rgb(52,71,103)"/></svg>New diagram</div>\n\t\t\t\t<div id="open"><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 21a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414l2 2H20a1 1 0 0 1 1 1v3h-2V7h-7.414l-2-2H4v11.998L5.5 11h17l-2.31 9.243a1 1 0 0 1-.97.757H3zm16.938-8H7.062l-1.5 6h12.876l1.5-6z" fill="rgb(52,71,103)"/></svg>Open diagram image</div>\n\t\t\t\t<div id="save"><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 19h18v2H3v-2zm10-5.828L19.071 7.1l1.414 1.414L12 17 3.515 8.515 4.929 7.1 11 13.17V2h2v11.172z" fill="rgb(52,71,103)"/></svg>Save diagram image</div>\n\t\t\t\t<div id="link"><svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13.06 8.11l1.415 1.415a7 7 0 0 1 0 9.9l-.354.353a7 7 0 0 1-9.9-9.9l1.415 1.415a5 5 0 1 0 7.071 7.071l.354-.354a5 5 0 0 0 0-7.07l-1.415-1.415 1.415-1.414zm6.718 6.011l-1.414-1.414a5 5 0 1 0-7.071-7.071l-.354.354a5 5 0 0 0 0 7.07l1.415 1.415-1.415 1.414-1.414-1.414a7 7 0 0 1 0-9.9l.354-.353a7 7 0 0 1 9.9 9.9z" fill="rgb(52,71,103)"/></svg>Copy link to diagram</div>\n\t\t\t\t<a href="/donate.html" target="_blank" style="margin-bottom: 0;">\n\t\t\t\t\t<svg viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0H24V24H0z"/><path d="M12.001 4.529c2.349-2.109 5.979-2.039 8.242.228 2.262 2.268 2.34 5.88.236 8.236l-8.48 8.492-8.478-8.492c-2.104-2.356-2.025-5.974.236-8.236 2.265-2.264 5.888-2.34 8.244-.228zm6.826 1.641c-1.5-1.502-3.92-1.563-5.49-.153l-1.335 1.198-1.336-1.197c-1.575-1.412-3.99-1.35-5.494.154-1.49 1.49-1.565 3.875-.192 5.451L12 18.654l7.02-7.03c1.374-1.577 1.299-3.959-.193-5.454z" fill="rgb(255,66,77)"/></svg>Donate\n\t\t\t\t</a>\n\t\t \t</div>';const e=t.getElementById("options");function i(){e.style.visibility="visible"===e.style.visibility?"hidden":"visible"}function s(e,s){t.getElementById(e).onclick=t=>{Qr(!0),s(),i(),Qr(!1)}}t.getElementById("menu").onclick=i,t.getElementById("menu2").onclick=i,s("new",(()=>{Xr(this._canvas),tn(!0)})),s("save",(()=>{const t=qr(this._canvas);0!==t.s.length?ao(this._canvas,JSON.stringify(t),(t=>uo(t,"dgrm.png"))):bo()})),s("open",(()=>fo(".png",(async t=>await yo(this._canvas,t))))),s("link",(async()=>{const t=qr(this._canvas);if(0===t.s.length)return void bo();const e=po(),i=new URL(window.location.href);i.searchParams.set("k",e),await navigator.clipboard.writeText(i.toString()),await co(e,t),alert("Link to diagram copied to clipboard")}))}init(t){this._canvas=t,document.body.addEventListener("dragover",(t=>{t.preventDefault()})),document.body.addEventListener("drop",(async t=>{t.preventDefault(),1===t.dataTransfer?.items?.length&&"file"===t.dataTransfer.items[0].kind&&"image/png"===t.dataTransfer.items[0].type?await yo(this._canvas,t.dataTransfer.items[0].getAsFile()):wo()}))}}async function yo(t,e){const i=await lo(e);i?Kr(t,JSON.parse(i))&&tn(!1):wo()}customElements.define("ap-menu",vo);const wo=()=>alert("File cannot be read. Use the exact image file you got from the application."),bo=()=>alert("Diagram is empty");class xo extends HTMLElement{connectedCallback(){const t=this.attachShadow({mode:"closed"});t.innerHTML='<style>\n\t\t\t.menu {\n\t\t\t\toverflow-x: auto;\n\t\t\t\tpadding: 0;\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 50%;\n\t\t\t\tleft: 5px;\n\t\t\t\ttransform: translateY(-50%);\n\t\t\t\tbox-shadow: 0px 0px 58px 2px rgba(34, 60, 80, 0.2);\n\t\t\t\tborder-radius: 16px;\n\t\t\t\tbackground-color: rgba(255,255,255, .9);\n\t\t\t}\n\n\t\t\t.content {\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\t\t\t\n\t\t\t[data-cmd] {\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\n\t\t\t.menu svg { padding: 10px; }\n\t\t\t.stroke {\n\t\t\t\tstroke: #344767;\n\t\t\t\tstroke-width: 2px;\n\t\t\t\tfill: transparent;\n\t\t\t}\n\t\t\n\t\t\t.menu .big {\n\t\t\t\twidth: 62px;\n\t\t\t\tmin-width: 62px;\n\t\t\t}\n\n\t\t\t@media only screen and (max-width: 700px) {\n\t\t\t\t.menu {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tborder-radius: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tdisplay: flex;\n  \t\t\t\t\tflex-direction: column;\n\t\t\t\t\ttop: unset;\n\t\t\t\t\tleft: unset;\n\t\t\t\t\ttransform: unset;\n\t\t\t\t}\n\n\t\t\t\t.content {\n\t\t\t\t\talign-self: center;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t}\n\t\t\t}\n\t\t\t</style>\n\t\t\t<div id="menu" class="menu" style="touch-action: none;">\n\t\t\t\t<div class="content">\n\t\t\t\t\t<svg class="stroke" style="fill: #344767;" data-cmd="shapeAdd" data-cmd-arg="5" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>\n\t\t\t\t\t<svg class="stroke" data-cmd="shapeAdd" data-cmd-arg="1" viewBox="0 0 24 24" width="24" height="24"><circle r="9" cx="12" cy="12"></circle></svg>\n\t\t\t\t\t<svg class="stroke" data-cmd="shapeAdd" data-cmd-arg="4" viewBox="0 0 24 24" width="24" height="24"><path d="M2 12 L12 2 L22 12 L12 22 Z" stroke-linejoin="round"></path></svg>\n\t\t\t\t\t<svg class="stroke" data-cmd="shapeAdd" data-cmd-arg="2" viewBox="0 0 24 24" width="24" height="24"><rect x="2" y="4" width="20" height="16" rx="3" ry="3"></rect></svg>\n\t\t\t\t\t<svg data-cmd="shapeAdd" data-cmd-arg="0" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13 8v8a3 3 0 0 1-3 3H7.83a3.001 3.001 0 1 1 0-2H10a1 1 0 0 0 1-1V8a3 3 0 0 1 3-3h3V2l5 4-5 4V7h-3a1 1 0 0 0-1 1z" fill="rgba(52,71,103,1)"/></svg>\n\t\t\t\t\t<svg data-cmd="shapeAdd" data-cmd-arg="3" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13 6v15h-2V6H5V4h14v2z" fill="rgba(52,71,103,1)"/></svg>\n\t\t\t\t</div>\n\t\t\t</div>';const e=t.getElementById("menu");e.querySelectorAll('[data-cmd="shapeAdd"]').forEach((t=>er(t,"pointerdown",this))),er(e,"pointerleave",this),er(e,"pointerup",this),er(e,"pointermove",this)}init(t){this._canvas=t}handleEvent(t){switch(t.type){case"pointermove":if(!this._isNativePointerleaveTriggered){const e=document.elementFromPoint(t.clientX,t.clientY);if(e===this._pointElem)return;this._parentElem===this._pointElem&&this._canvas.ownerSVGElement.setPointerCapture(t.pointerId),this._pointElem=e}break;case"pointerleave":this._isNativePointerleaveTriggered=!0,null!=this._pressedShapeTemplKey&&this._shapeCreate(t),this._clean();break;case"pointerdown":this._pressedShapeTemplKey=parseInt(t.currentTarget.getAttribute("data-cmd-arg")),this._parentElem=document.elementFromPoint(t.clientX,t.clientY),this._pointElem=this._parentElem,this._isNativePointerleaveTriggered=null;break;case"pointerup":this._clean();break}}_shapeCreate(t){tn(!1);const e=xr(this._canvas[gr].data,t.clientX,t.clientY),i=0===this._pressedShapeTemplKey?{s:{data:{dir:"right",position:{x:e.x-24,y:e.y}}},e:{data:{dir:"right",position:{x:e.x+24,y:e.y}}}}:{type:this._pressedShapeTemplKey,position:{x:e.x,y:e.y},title:3==this._pressedShapeTemplKey?"Title":""},s=this._canvas[gr].shapeMap[this._pressedShapeTemplKey].create(i);this._canvas.append(s),s.dispatchEvent(new PointerEvent("pointerdown",t))}_clean(){this._pressedShapeTemplKey=null,this._parentElem=null,this._pointElem=null}}customElements.define("ap-menu-shape",xo);var Co=(0,i.defineComponent)({setup(){const t=(0,i.ref)();return(0,i.onMounted)((()=>{const e=document.getElementById("canvas"),i=t.value?.getBoundingClientRect();e[gr]={data:{position:{x:0,y:0},offsetPosition:{x:i?.x,y:i?.y},scale:1,cell:24},shapeMap:to(e)},pr(e.ownerSVGElement),Tr(e.ownerSVGElement),rn(e),dn(e),Ir(e),document.getElementById("menu-shape").init(e),tn(!0)})),{containerDiagram:t}}});const Io=(0,ae.A)(Co,[["render",Gs]]);var Eo=Io,$o=(0,i.defineComponent)({components:{BaseConfigComp:ts,IrrigationDiagram:Eo},setup(){}});const ko=(0,ae.A)($o,[["render",Ws]]);var So=ko,To={setup(t,e){let s=(0,i.reactive)({onEdit:!1,classSearchWrapper:[],searchText:"",dataTableListWidget:{data:[{avatarUrl:"test url",description:"Hero merupakan spanduk untuk menampilkan informasi di halaman awal",ID:0,title:"Hero",hidden:!1},{avatarUrl:"test url",description:"Menampilkan posisi device",ID:1,title:"Peta Device",hidden:!1},{avatarUrl:"test url",description:"Membuat tampilan peta irigasi",ID:2,title:"Peta Irigasi",hidden:!1}]},showSelector:!1,selectedItem:-1});const r="focus",n=(0,i.ref)();let o=t=>{s.classSearchWrapper.includes(r)||s.classSearchWrapper.push(r)},a=t=>{s.classSearchWrapper.includes(r)&&s.classSearchWrapper.splice(s.classSearchWrapper.indexOf(r),1)};(0,i.watch)(s,(t=>{let i={showSelector:t.showSelector,onEdit:t.onEdit};e.emit("change",i)}));let l=t=>{t.preventDefault(),t.stopPropagation()},h=()=>{s.onEdit=!1,e.emit("cancelEdit")},c=()=>{e.emit("save")},d=t=>{s.showSelector=!1,s.selectedItem=t};const p=[ls,Hs,So];return{inputEl:n,dataReactive:s,onFocus:o,onBlur:a,onSubmit:l,onItemSelected:d,onCancelEdit:h,onSave:c,components:p}},components:{TableWidgetList:$i,WgHeroConfig:ls,WgMapConfig:Hs},props:{layoutName:{type:String}}};const Mo=(0,ae.A)(To,[["render",di],["__scopeId","data-v-2c139a84"]]);var Po=Mo;class zo{static listen(t,e,i){return t.addEventListener(e,i),()=>t.removeEventListener(e,i)}static defaultGridOptions(){return{margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,mobileBreakpoint:640,useBodyForBreakpoint:!1,minCols:24,maxCols:100,minRows:10,maxRows:100,maxItemCols:100,minItemCols:1,maxItemRows:100,minItemRows:1,maxItemArea:2500,minItemArea:1,defaultItemCols:1,defaultItemRows:1,fixedColWidth:105,fixedRowHeight:105,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:!1},resizable:{enabled:!1},swap:!1,pushItems:!0,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:It.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1}}}var Lo={setup(){let t=[{cols:2,rows:2,y:0,x:0,d:"A"},{cols:2,rows:2,y:0,x:1,d:"B"},{cols:2,rows:2,y:0,x:2,d:"C"}];const e=(0,i.reactive)({widgets:Object.assign({},t),options:zo.defaultGridOptions(),widgetSelectorEvent:{showSelector:!1,onEdit:!1},event:new et});let s=t=>{e.options.resizable.enabled=e.options.draggable.enabled=t.onEdit,e.widgetSelectorEvent=t};(0,i.onMounted)((()=>{e.event=new et})),(0,i.onUnmounted)((()=>{e.event=null}));let r=()=>{e.event.next()};return{data:e,widgetSelectorEvent:s,onCancel:r}},components:{gridItem:Ye,gridster:pe,WidgetSelector:Po},props:{layoutName:{type:String}}};const Bo=(0,ae.A)(Lo,[["render",o],["__scopeId","data-v-4491bed8"]]);var Ro=Bo;const Vo=(t,e)=>{t.component("MertaniWidget",Ro)};var No=Vo,Ao=No}(),r}()}));
//# sourceMappingURL=WidgetMertani.umd.min.js.map